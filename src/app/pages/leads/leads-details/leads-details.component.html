<div id="splash-screen" class="splash-screen" *ngIf="IsLoading">
  <img src="./assets/media/logos/prophero-small.svg" alt="PropHero logo" />
  <span>Loading ...</span>
</div>
<div
  id="kt_leads-details"
  class="bg-body"
  data-kt-drawer="true"
  data-kt-drawer-name="Leads-details"
  data-kt-drawer-activate="true"
  data-kt-drawer-overlay="false"
  data-kt-drawer-width="{default:'300px', 'lg': '900px'}"
  data-kt-drawer-direction="end"
  data-kt-drawer-toggle=".kt_activities_toggle"
  data-kt-drawer-close="#kt_leads-details_close" #container
>
  <div class="card shadow-none rounded-0 w-100">
    <form>
    <div class="card-header" id="kt_activities_header">
      <div>
        <div class="card-title fw-bold text-dark">
          <span *ngIf="!isEdit">New Lead</span>
          <span *ngIf="isEdit">{{setReference}} </span>
          <div class="ms-2" [hidden]="!isEdit">
              <!--begin::Dropview toggle-->
                <a
                  class="btn btn-icon btn-sm"
                  data-kt-menu-trigger="{default: 'hover'}"
                  data-kt-menu-attach="parent"
                  data-kt-menu-placement="bottom-start"
                >
                  <i class="bi bi-clock fs-3"></i>
                </a>
                <!--end::Dropview toggle-->

                <!--begin::Dropview-->
                <div class="menu menu-sub menu-sub-dropdown p-4" data-kt-menu="true">
                  <small>
                    Created: {{ leadsDetailsForTime?.created | date : "dd/MM/yyyy hh:mm:ss a "}}<br />
                    Updated: {{ leadsDetailsForTime?.updated | date : "dd/MM/yyyy hh:mm:ss a"}}<br />
                  </small>
                </div>
              <!--end::Dropview-->
          </div>
        </div>
        <div class="card-toolbar">
          <button type="button" class="btn btn-sm btn-icon btn-active-light-primary"
            id="kt_leads-details_close" (click)="closeLeads()">
            <app-keenicon name="cross" class="fs-1" ></app-keenicon>
          </button>
        </div>
      </div>
      <div class="d-flex align-items-center">
        <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bold">
          <!--begin::Nav item-->
          <li class="nav-item">
            <a
              class="nav-link text-active-primary ms-0 me-10 py-5 active cursor-pointer"
              [class.active]="selectedTab === 'tab1'"
              (click)="selectTab('tab1')"
            >
              Details
            </a>
          </li>

          <li class="nav-item">
            <a
              class="nav-link text-active-primary ms-0 me-10 py-5 cursor-pointer"
              [class.active]="selectedTab === 'tab2'"
              (click)="selectTab('tab2')"
            >
              Viewings
            </a>
          </li>

          <li class="nav-item">
            <a
              class="nav-link text-active-primary ms-0 me-10 py-5 cursor-pointer"
              [class.active]="selectedTab === 'tab3'"
              (click)="selectTab('tab3')"
            >
              Notes
            </a>
          </li>

          <li class="nav-item">
            <a
              class="nav-link text-active-primary ms-0 me-10 py-5 cursor-pointer"
              [class.active]="selectedTab === 'tab4'"
              (click)="selectTab('tab4')"
            >
              Matching Properties
            </a>
          </li>

        </ul>

        <div class="d-flex align-items-center">
          <div *ngIf="isEditLeadsPermission">
            <button *ngIf="isFormDataEdit && selectedTab == 'tab1'" (click)="isFormEdit()" class="btn btn-sm btn-primary mr-2">
              Edit
            </button>
          </div>
          <button *ngIf="isFormCancel && selectedTab == 'tab1'"  (click)="isFormCancle()"  class="btn btn-sm btn-light btn-active-light-primary me-3">
            Cancel
          </button>
          <button *ngIf="isFormSave && selectedTab == 'tab1'" (click)="onSubmit()" class="btn btn-sm btn-primary mr-2">
            Save
          </button>
        </div>
      </div>
    </div>
    <form [formGroup]="BasicDetails">
    <!--./card-header-->
    <div class="card-body position-relative p-0" id="kt_leads_body">
      <ul class="accordian-shortcuts"  *ngIf="selectedTab == 'tab1'">
        <li id="sec_1_1">
          <button (click)="scrollToElement('sec1');" [ngClass]="isSave && BasicDetails.invalid
          ? 'border-error'
          : isSave == true && getContactsDetail === '' ? 'border-error' : ''
      ">
          <i class="bi bi-house"></i>
          </button>
          <span class="reveal">Basic Details</span>
        </li>
        <li id="sec_2_1">
          <button (click)="scrollToElement('sec2'); " [ngClass]="isSave && (PropertyRequirements.invalid && (PropertyRequirements.dirty || PropertyRequirements.touched) || (isProperty1Invalid || isProperty2Invalid || isProperty3Invalid || isProperty4Invalid)) ? 'border-error' : ''">
            <i class="bi bi-person-vcard"></i>
          </button>
          <span class="reveal">Property Requirements</span>
        </li>
      </ul>
      <div class="accordion" *ngIf="selectedTab === 'tab1'" id="kt_accordion_1">
        <div class="accordion-item" id="sec1">
          <div class="accordion-body border-bottom">
            <div class="row mb-6">
              <label (click)="scrollToElement('sec1');" class="col-lg-3 col-form-label fw-bold fs-6 required">Status</label>
              <div class="col-lg-6">
                <ng-select
                [clearable]="false"
                  formControlName="Status"  [ngClass]="isSave && status.invalid ? 'border-error' : ''" [ngClass]="this.BasicDetails.get('Status')?.value === 1?'text-blue ph-status-dropdown': this.BasicDetails.get('Status')?.value === 2?'text-grey ph-status-dropdown': ''"
                  bindLabel="Status"
                  (change)="onChangeSubStatus($event)"
                >
                  <ng-option [ngClass]="this.BasicDetails.get('Status')?.value == 3? 'text-orange':this.BasicDetails.get('Status')?.value == 1?'text-blue ': this.BasicDetails.get('Status')?.value == 2?'text-grey ':''"
                    *ngFor="let status of AllStatusType"
                    [value]="status.id"
                    >{{ status.name }}</ng-option
                  >
                </ng-select>
                <div *ngIf="isSave && status.invalid" class="invalid-feedback d-block">
                  <div class="error-text">
                    Status is required
                  </div>
              </div>
              </div>
            </div>
            <div class="row mb-6">
              <label class="col-lg-3 col-form-label fw-bold fs-6 required">Sub Status</label>
              <div class="col-lg-6">
                <ng-select [disabled]="isDisabled"
                [clearable]="false"
                  formControlName="SubStatus"
                  bindLabel="SubStatus" [ngClass]="isSave== true && this.BasicDetails.get('SubStatus')?.value === null || isSave && SubStatus.invalid  ? 'border-error' : ''"
                  [ngClass]="this.BasicDetails.get('SubStatus')?.value  == 1||
                  this.BasicDetails.get('SubStatus')?.value  == 5 ||
                  this.BasicDetails.get('SubStatus')?.value  == 6||
                  this.BasicDetails.get('SubStatus')?.value  == 12||
                  this.BasicDetails.get('SubStatus')?.value  ==13||
                  this.BasicDetails.get('SubStatus')?.value  == 23||
                  this.BasicDetails.get('SubStatus')?.value  == 24
                  ? 'text-green ph-status-dropdown'
                  :this.BasicDetails.get('SubStatus')?.value  == 8||
                  this.BasicDetails.get('SubStatus')?.value  == 14||
                  this.BasicDetails.get('SubStatus')?.value  == 19||
                  this.BasicDetails.get('SubStatus')?.value  == 20||
                  this.BasicDetails.get('SubStatus')?.value  == 21||
                  this.BasicDetails.get('SubStatus')?.value  == 22||
                  this.BasicDetails.get('SubStatus')?.value  == 25
                  ?'text-red ph-status-dropdown'
                  : this.BasicDetails.get('SubStatus')?.value  == 2||
                  this.BasicDetails.get('SubStatus')?.value  == 3 ||
                  this.BasicDetails.get('SubStatus')?.value  == 4 ||
                  this.BasicDetails.get('SubStatus')?.value  == 11||
                  this.BasicDetails.get('SubStatus')?.value  == 7||
                  this.BasicDetails.get('SubStatus')?.value  == 10||
                  this.BasicDetails.get('SubStatus')?.value  == 15||
                  this.BasicDetails.get('SubStatus')?.value  == 17||
                  this.BasicDetails.get('SubStatus')?.value  == 18||
                  this.BasicDetails.get('SubStatus')?.value  == 16
                  ? 'text-blue ph-status-dropdown' : ''"
                  id="SubStatusId"
                >
                  <ng-option [ngClass]="this.BasicDetails.get('SubStatus')?.value  == 1||
                  this.BasicDetails.get('SubStatus')?.value  == 5 ||
                  this.BasicDetails.get('SubStatus')?.value  == 6||
                  this.BasicDetails.get('SubStatus')?.value  == 12||
                  this.BasicDetails.get('SubStatus')?.value  ==13||
                  this.BasicDetails.get('SubStatus')?.value  == 23
                  ? 'text-green'
                  :this.BasicDetails.get('SubStatus')?.value  == 8||
                  this.BasicDetails.get('SubStatus')?.value  == 14||
                  this.BasicDetails.get('SubStatus')?.value  == 19||
                  this.BasicDetails.get('SubStatus')?.value  == 20||
                  this.BasicDetails.get('SubStatus')?.value  == 21||
                  this.BasicDetails.get('SubStatus')?.value  == 22
                  ?'text-red'
                  : this.BasicDetails.get('SubStatus')?.value  == 2||
                  this.BasicDetails.get('SubStatus')?.value  == 3 ||
                  this.BasicDetails.get('SubStatus')?.value  == 4 ||
                  this.BasicDetails.get('SubStatus')?.value  == 11||
                  this.BasicDetails.get('SubStatus')?.value  == 7||
                  this.BasicDetails.get('SubStatus')?.value  == 10||
                  this.BasicDetails.get('SubStatus')?.value  == 15||
                  this.BasicDetails.get('SubStatus')?.value  == 17||
                  this.BasicDetails.get('SubStatus')?.value  == 18||
                  this.BasicDetails.get('SubStatus')?.value  == 16
                  ? 'text-blue' : ''"
                    *ngFor="let sub of AllSubStatusType"
                    [value]="sub.id"
                    >{{ sub.name }}</ng-option
                  >
                </ng-select>
                <div *ngIf="isSave && SubStatus.invalid" class="invalid-feedback d-block">
                  <div class="error-text">
                    Sub Status is required
                  </div>
              </div>
                <!-- <div class="error-text">SubStatus is required</div> -->
              </div>
            </div>
          </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="kt_accordion_1_header_1">
            <button
            class="accordion-button fs-4 fw-semibold"
            type="button"
            (click)="basic = !basic"
            [class.collapsed]="!basic"
            [ngClass]="isSave && getContactsDetail === '' && BasicDetails.invalid? 'border-error':isSave && BasicDetails.invalid?'border-error':isSave == true && getContactsDetail === '' ? 'border-error' : ''"
                      >
              Basic Details
            </button>
          </h2>
        </div>
          <div
            id="kt_accordion_1_body_1"
            class="accordion-collapse collapse"
            [class.show]="basic"
          >
            <div class="accordion-body">
               <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required"
                    >Assigned To</label
                  >
                  <div class="col-lg-6">
                    <div>
                      <ng-select
                        formControlName="LeadsAgent1"
                        bindLabel="Priority" [ngClass]="isSave && LeadsAgent1.invalid ? 'border-error' : ''"
                      >
                      <ng-option *ngFor="let assignee of assignToList" [value]="assignee.id">
                        <span class="d-flex gap-2 align-items-center">
                          <ngx-avatar *ngIf="assignee.profileImage == null || assignee.profileImage == ''" size="26" class="avatar" [name]="assignee?.name"></ngx-avatar>
                          <img *ngIf="assignee.profileImage != null && assignee.profileImage != ''" [src]="assignee.profileImage" alt="Image Preview" [style.border-radius.px]="50" [style.width.px]="26" [style.height.px]="26">
                          {{ assignee.name }}</span></ng-option>
                      </ng-select>
                      <div *ngIf="isSave && LeadsAgent1.invalid" class="invalid-feedback d-block">
                        <div class="error-text">
                          Assigned To is required
                        </div>
                    </div>
                    </div>
                  </div>
                </div>

                <div class="row mb-6" id="sec1">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required">Contact</label>
                      <div class="col-lg-6">
                          <div class="m-0">
                         <button  [ngClass]="isSave && getContactsDetail === ''? 'border-error': ''
                                " [disabled]="isContactPopup" (click)="AddContact()" class="btn btn-bg-light btn-icon-primary btn-text-primary myDIV">
                                       <i class="bi bi-check2-square"></i> Select Contact
                          </button>
                          <div class="hide" *ngIf="isEditContactDisable == false ? 'myDiv' : ''">Contact can’t be changed</div>
                          <div *ngIf="isSave && getContactsDetail === ''" >
                                      <div style="padding-top: 5px;
                                      font-size: 12px;
                                      color: red;">
                                        Contact is required
                                      </div>
                        </div>
                     </div>
                </div>
                </div><!--./row-->
                 <!--Contact Details-->
                 <div class="mb-5 pb-5" *ngIf="getContactsDetail" id="sec1">

                  <div class="row mb-6">
                    <label class="col-lg-3 col-form-label fw-bold fs-6">Name</label>
                    <div class="col-lg-6 d-flex align-items-center">
                      {{getContactsDetail?.firstName}} {{getContactsDetail?.lastName}}
                    </div>
                  </div><!--./row-->
                  <div class="row mb-6">
                    <label class="col-lg-3 col-form-label fw-bold fs-6">Reference Number</label>
                    <div class="col-lg-6 d-flex align-items-center">
                      {{getContactsDetail?.ref}}
                    </div>
                  </div><!--./row-->
                  <carousel class="ph-carousel"  *ngIf="getContactsDetail">
                    <slide>
                      <!-- Slide 1 content -->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Mobile (Personal)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                         <span>{{ getMobile(1, getContactsDetail?.mobile) }}</span>
                        </div>
                      </div><!--./row-->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Phone (Personal)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{ getPhone(1,getContactsDetail?.phone) }}
                        </div>
                      </div><!--./row-->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Email (Personal)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{ getEmail(1,getContactsDetail?.email) }}
                        </div>
                      </div><!--./row-->
                    </slide>
                    <slide>
                      <!-- Slide 2 content -->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Mobile (Work)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{getMobile(2,getContactsDetail?.mobile) }}
                        </div>
                      </div><!--./row-->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Phone (Work)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{ getPhone(2,getContactsDetail?.phone) }}
                        </div>
                      </div><!--./row-->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Email (Work)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{ getEmail(2,getContactsDetail?.email) }}
                        </div>
                      </div><!--./row-->
                    </slide>
                    <slide>
                      <!-- Slide 3 content -->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Mobile (Other)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{ getMobile(3,getContactsDetail?.mobile) }}
                        </div>
                      </div><!--./row-->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Phone (Other)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{ getPhone(3,getContactsDetail?.phone) }}
                        </div>
                      </div><!--./row-->
                      <div class="row mb-6">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Email (Other)</label>
                        <div class="col-lg-6 d-flex align-items-center">
                          {{ getEmail(3,getContactsDetail?.email) }}
                        </div>
                      </div><!--./row-->
                    </slide>
                  </carousel>

                </div>


                <ng-template #Addcontact>
                  <div class="modal-content advance-filter-modal">
                    <div class="modal-header py-3">
                      <!--begin::Modal title-->
                      <h4 class="m-0">Select Contact</h4>
                      <!--end::Modal title-->
                      <div
                        class="btn btn-sm btn-icon btn-active-color-primary"
                        (click)="close()"
                      >
                        <i class="ki-duotone ki-cross fs-1"
                          ><span class="path1"></span><span class="path2"></span
                        ></i>
                      </div>
                    </div>


                    <div>
                      <!-- <span class="ml-4"
                        >Select or add a Contact for the new lead</span
                      > -->
                      <!-- <div class="row">
                        <div class="ml-5 mt-4">
                          <input
                            type="text"
                            id="FirstNameId"
                            placeholder="First Name"
                            class="form-control mb-3 mb-lg-0"
                            formControlName="FirstName"
                          />
                        </div>
                        <div class="ml-5 mt-4">
                          <input
                            type="text"
                            id="LastNameId"
                            placeholder="Last Name"
                            class="form-control mb-3 mb-lg-0"
                            formControlName="LastName"
                          />
                        </div>

                        <div class="ml-5 mt-4">
                          <input
                            type="number"
                            id="PhoneNumberId"
                            class="form-control mb-3 mb-lg-0"
                            formControlName="PhoneNumber"
                          />
                        </div>
                        <div class="ml-5 mt-4 mb-3">
                          <input
                            type="email"
                            id="EmailAddressId"
                            placeholder="Email Address"
                            class="form-control mb-3 mb-lg-0"
                            formControlName="EmailAddress"
                          />
                        </div>
                      </div> -->

                      <!-- <table
                        id="listings_row"
                        class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"
                      >
                        <thead class="fw-bold">
                          <th>
                            <div>
                              <input
                                class="form-control mb-3 mb-lg-0"
                                type="text"
                                placeholder="First Name"
                                formControlName="FirstName"
                                name="FirstName"
                                style="min-width: 40px !important"
                              />
                            </div>
                          </th>
                          <th>
                            <div>
                              <input
                                class="form-control mb-3 mb-lg-0"
                                type="text"
                                placeholder="Last Name"
                                formControlName="LastName"
                                name="LastName"
                                style="min-width: 40px !important"
                              />
                            </div>
                          </th>
                          <th>
                            <div style="width: 9rem">
                              <ng-select
                                formControlName="searchCountryCode"
                                bindLabel="searchCountryCode"
                                id="searchCountryCodeId"
                              >
                                <ng-option
                                  *ngFor="let code of AllPhoneCode"
                                  [value]="code.id"
                                  >{{ code.code }}</ng-option
                                >
                              </ng-select>
                            </div>
                          </th>
                          <th>
                            <div>
                              <input
                                class="form-control mb-3 mb-lg-0"
                                type="number"
                                placeholder="Phone"
                                formControlName="PhoneNumber"
                                name="PhoneNumber"
                                style="min-width: 40px !important"
                              />
                            </div>
                          </th>
                          <th>
                            <div>
                              <input
                                class="form-control mb-3 mb-lg-0"
                                type="email"
                                placeholder="Email Address"
                                formControlName="EmailAddress"
                                name="EmailAddress"
                                style="min-width: 40px !important"
                              />
                            </div>
                          </th>
                        </thead>
                      </table> -->
                      <!-- <div class="row ml-4">
                        <div class="col-lg-2 mb-3">
                          <a
                            (click)="searchContacts()"
                            class="btn btn-sm btn-flex btn-primary fw-bold me-1"
                            id=""
                          >
                            <i class="bi bi-search"></i> Search Contacts
                          </a>
                          <span class="ml-2">or</span>
                        </div>

                        <div class="col-lg-2 mb-3">
                          <a (click)="addNewContact()" class="btn btn-sm btn-flex btn-primary fw-bold me-1" id="">
                            <i class="bi bi-plus"></i> Add new contact
                          </a>
                        </div>
                      </div> -->

                      <form [formGroup]="searchContactForm" novalidate="" class="form">
                        <div  class="card-header align-items-center p-0 gap-2 gap-md-5">
                          <!--begin::Actions-->
                          <div class="d-flex w-100 justify-content-between">
                            <!--begin::Drawer toggle-->

                            <!--end::Drawer toggle-->
                          </div>
                          <!--end::Actions-->
                          <!-- begin::Table container -->
                          <!-- <button   id="kt_contact-details_toggle" (click)="openViewing()">Open Viewing for demo</button> -->
                          <!-- <form [formGroup]="searchContactForm"> -->
                          <div class="table-responsive">
                            <!-- begin::Table -->
                            <table id="listings_row" class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4">
                              <!-- begin::Table head -->
                              <thead class="fw-bold">
                                <th class="w-40px">
                                  <div class="form-check form-check-sm form-check-custom form-check-solid p-0">
                                    <!-- <input class="form-check-input" type="checkbox" value="1" data-kt-check="true" data-kt-check-target=".widget-9-check" /> -->
                                  </div>
                                </th>

                                <!--Basic Details-->
                                <th class="min-w-120px" (click)="OnSort('Ref')"> Reference </th>
                                <th class="min-w-120px" (click)="OnSort('AssignedTo')"> Assigned To </th>



                                <!-- <th class="min-w-120px" (click)="OnSort('Title')"> Title </th> -->
                                <th class="min-w-120px" (click)="OnSort('FirstName')"> First Name </th>
                                <th class="min-w-120px" (click)="OnSort('LastName')"> Last Name </th>

                                <!-- Contact Details -->
                                <th class="min-w-120px" (click)="OnSort('PersonalMobile')"> Personal Mobile </th>
                                <th class="min-w-120px" (click)="OnSort('WorkMobile')"> Work Mobile </th>
                                <th class="min-w-120px" (click)="OnSort('OtherMobile')"> Other Mobile </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalPhone')"> Personal Phone </th>
                                <th class="min-w-120px" (click)="OnSort('WorkPhone')"> Work Phone </th>
                                <th class="min-w-120px" (click)="OnSort('OtherPhone')"> Other Phone </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalEmail')"> Personal Email </th>
                                <th class="min-w-120px" (click)="OnSort('WorkEmail')"> Work Email </th>
                                <th class="min-w-120px" (click)="OnSort('OtherEmail')"> Other Email </th>
                                <th class="min-w-120px" (click)="OnSort('ContactType')"> Contact Type </th>
                                <!-- <th class="min-w-120px" (click)="OnSort('PersonalFax')"> Personal Fax </th>
                                <th class="min-w-120px" (click)="OnSort('WorkFax')"> Work Fax </th>
                                <th class="min-w-120px" (click)="OnSort('OtherFax')"> Other Fax </th> -->
                                <!-- <th class="min-w-120px" (click)="OnSort('PersonalPO')"> Personal PO </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalAddressLine1')"> Personal Address Line 1 </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalAddressLine2')"> Personal Address Line 2 </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalCity')"> Personal City </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalZipCode')"> Personal ZipCode </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalState')"> Personal State </th>
                                <th class="min-w-120px" (click)="OnSort('PersonalCountry')"> Personal Country </th>
                                <th class="min-w-120px" (click)="OnSort('WorkPO')"> Work PO </th>
                                <th class="min-w-120px" (click)="OnSort('WorkAddressLine1')"> Work Address Line 1 </th>
                                <th class="min-w-120px" (click)="OnSort('WorkAddressLine2')"> Work Address Line 2 </th>
                                <th class="min-w-120px" (click)="OnSort('WorkCity')"> Work City </th>
                                <th class="min-w-120px" (click)="OnSort('WorkZipCode')"> Work ZipCode </th>
                                <th class="min-w-120px" (click)="OnSort('WorkState')"> Work State </th>
                                <th class="min-w-120px" (click)="OnSort('WorkCountry')"> Work Country </th> -->

                                <!-- Social Media -->
                                <!-- <th class="min-w-120px" (click)="OnSort('FacebookLink')"> Facebook Link </th>
                                <th class="min-w-120px" (click)="OnSort('InstagramLink')"> Instagram Link </th>
                                <th class="min-w-120px" (click)="OnSort('TwitterLink')"> Twitter Link </th>
                                <th class="min-w-120px" (click)="OnSort('LinkedInLink')"> LinkedIn Link </th>
                                <th class="min-w-120px" (click)="OnSort('GooglePlusLink')"> GooglePlus Link </th>
                                <th class="min-w-120px" (click)="OnSort('SkypeLink')"> Skype Link </th>
                       -->

                                <!-- <th class="min-w-120px" (click)="OnSort('WeChatLink')"> WeChat Link </th> -->
                                <!-- <th class="min-w-120px" (click)="OnSort('SocialWebsite')"> Social Website </th> -->
                                <!-- <th class="min-w-120px" (click)="OnSort('WebsiteLink')"> Personal Website </th> -->

                                <!-- Additional Info -->
                                <!-- <th class="min-w-120px" (click)="OnSort('VIP')"> VIP </th>
                                <th class="min-w-120px" (click)="OnSort('Gender')"> Gender </th>
                                <th class="min-w-120px" (click)="OnSort('DOB')"> Date of Birth </th>
                                <th class="min-w-120px" (click)="OnSort('Nationality1')"> Nationality </th>
                                <th class="min-w-120px" (click)="OnSort('Nationality2')"> Second Nationality  </th>
                                <th class="min-w-120px" (click)="OnSort('Religion')"> Religion </th>
                                <th class="min-w-120px" (click)="OnSort('NativeLanguage')"> Native Language </th>
                                <th class="min-w-120px" (click)="OnSort('SecondLanguage')"> Second Language </th>

                                <th class="min-w-120px" (click)="OnSort('ContactSource')"> Contact Source </th>
                                <th class="min-w-120px" (click)="OnSort('CompanyName')"> Company Name </th>
                                <th class="min-w-120px" (click)="OnSort('Designation')"> Designation </th>
                                <th class="min-w-120px" (click)="OnSort('Website')"> Website </th>
                                <th class="min-w-120px" (click)="OnSort('ContactType')"> Contact Type </th>
                                <th class="min-w-120px" (click)="OnSort('Created')"> Created  </th>
                                <th class="min-w-120px" (click)="OnSort('CreatedBy')"> Created By </th>
                                <th class="min-w-120px" (click)="OnSort('Updated')"> Updated  </th>
                                <th class="min-w-120px" (click)="OnSort('UpdatedBy')"> Updated By </th> -->
                              </thead>
                              <!-- end::Table head -->

                              <!-- begin::Table Filter -->
                              <thead id="filter">
                                <!-- <form [formGroup]="searchContactForm"> -->
                                <th></th>
                                <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterRef" (keyup)="MinCharSearch($event,'Ref')"/></th>
                                <th>
                                  <ng-select formControlName="filterAssignee" bindLabel="name" (change)="filterContact()">
                                    <!-- <ng-option value="" selected>Select Assign To</ng-option> -->
                                            <ng-option *ngFor="let assignee of assignToList" [value]="assignee.id">{{ assignee.name
                                              }}</ng-option>
                                  </ng-select>
                                </th>




                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterFirstName" (keyup)="MinCharSearch($event,'FirstName')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterLastName" (keyup)="MinCharSearch($event,'LastName')"/></th>

                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalMobile" (keyup)="MinCharSearch($event,'PersonalMobile')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkMobile" (keyup)="MinCharSearch($event,'WorkMobile')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterOtherMobile" (keyup)="MinCharSearch($event,'OtherMobile')"/></th>

                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalPhone" (keyup)="MinCharSearch($event,'PersonalPhone')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkPhone" (keyup)="MinCharSearch($event,'WorkPhone')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterOtherPhone" (keyup)="MinCharSearch($event,'OtherPhone')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalEmail" (keyup)="MinCharSearch($event,'PersonalEmail')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkEmail" (keyup)="MinCharSearch($event,'WorkEmail')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterOtherEmail" (keyup)="MinCharSearch($event,'OtherEmail')"/></th>
                              <th>
                                <ng-select formControlName="filterContactType" bindLabel="name" id="titleId" (change)="filterContact()">
                                  <ng-option *ngFor="let contactType of ContactTypeList" [value]="contactType.id">{{ contactType.name
                                    }}</ng-option>
                                </ng-select>
                              </th>
                              <!-- <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalFax" (keyup)="MinCharSearch($event,'PersonalFax')"/></th> -->
                              <!-- <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkFax" (keyup)="MinCharSearch($event,'WorkFax')"/></th> -->
                              <!-- <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterOtherFax" (keyup)="MinCharSearch($event,'OtherFax')"/></th> -->
                              <!-- <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalPO" (keyup)="MinCharSearch($event,'PersonalPO')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalAddressLine1" (keyup)="MinCharSearch($event,'PersonalAddressLine1')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalAddressLine2" (keyup)="MinCharSearch($event,'PersonalAddressLine2')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalCity" (keyup)="MinCharSearch($event,'PersonalCity')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalZipCode" (keyup)="MinCharSearch($event,'PersonalZipCode')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterPersonalState" (keyup)="MinCharSearch($event,'PersonalState')"/></th> -->
                              <!-- <th> -->
                                <!-- <ng-select formControlName="filterPersonalCountry" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let country of CountryList" [value]="country.countryName">{{ country.countryName -->
                                    <!-- }}</ng-option> -->
                                <!-- </ng-select>
                              </th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkPO" (keyup)="MinCharSearch($event,'WorkPO')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkAddressLine1" (keyup)="MinCharSearch($event,'WorkAddressLine1')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkAddressLine2" (keyup)="MinCharSearch($event,'WorkAddressLine2')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkCity" (keyup)="MinCharSearch($event,'WorkCity')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkZipCode" (keyup)="MinCharSearch($event,'WorkZipCode')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWorkState" (keyup)="MinCharSearch($event,'WorkState')"/></th>
                              <th>
                                <ng-select formControlName="filterWorkCountry" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let country of CountryList" [value]="country.countryName">{{ country.countryName
                                    }}</ng-option>
                                </ng-select>
                              </th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterFacebookLink" (keyup)="MinCharSearch($event,'FacebookLink')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterInstagramLink" (keyup)="MinCharSearch($event,'InstagramLink')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterTwitterLink" (keyup)="MinCharSearch($event,'TwitterLink')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterLinkedInLink" (keyup)="MinCharSearch($event,'LinkedInLink')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterGooglePlusLink" (keyup)="MinCharSearch($event,'GoooglePlusLink')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterSkypeLink" (keyup)="MinCharSearch($event,'SkypeLink')"/></th>
                               -->

                              <!-- <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWeChatLink" (keyup)="MinCharSearch($event,'WeChatLink')"/></th> -->
                              <!-- <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterSocialWebsite" (keyup)="MinCharSearch($event,'SocailWebsite')"/></th> -->
                              <!-- <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWebsiteLink" (keyup)="MinCharSearch($event,'WebsiteLink')"/></th>
                              <th> -->
                                <!-- <div class="form-check form-switch form-switch-sm form-check-custom form-check-solid"> -->
                                <!-- <input class="form-check-input mb-lg-0 mb-3" id="managed" type="checkbox" formControlName="filterVip" (change)="filterContact()"/> -->
                                <!-- <ng-select formControlName="filterVip" bindLabel="name" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select Assign To</ng-option> -->
                                          <!-- <ng-option [value]="1">Yes</ng-option>
                                          <ng-option [value]="0">No</ng-option>
                                </ng-select> -->
                              <!-- </div> -->
                            <!-- </th>
                              <th>
                                <ng-select formControlName="filterGender" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                <!-- <ng-option value="" selected>Select</ng-option> -->
                                <!-- <ng-option *ngFor="let gender of GenderList" [value]="gender.id">{{ gender.name }}</ng-option>
                              </ng-select></th>
                              <th>
                                <div class="d-flex gap-2 w-300px">
                                  <div class="position-relative w-50">
                                    <input type="date" formControlName="filterFromDOB" class="form-control mb-3 mb-lg-0" (change)="filterContact()"/>
                                    <span class="input-date-placeholder" for="filterFromDOB">From</span>
                                  </div>
                                  <div class="position-relative w-50">
                                    <input type="date" formControlName="filterToDOB" class="form-control mb-3 mb-lg-0" (change)="filterContact()"/>
                                    <span class="input-date-placeholder" for="filterToDOB">To</span>
                                  </div>
                                </div>
                              </th>
                              <th>
                                <ng-select formControlName="filterNationality1" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let nationality of NationalitiesList" [value]="nationality.id">{{
                                    nationality.countryName }}</ng-option>
                                </ng-select>
                              </th>
                              <th>
                                <ng-select formControlName="filterNationality2" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let nationality of NationalitiesList" [value]="nationality.id">{{
                                    nationality.countryName }}</ng-option>
                                </ng-select>
                              </th>
                              <th>
                                <ng-select formControlName="filterReligion" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let religion of ReligionList" [value]="religion.id">{{ religion.name
                                    }}</ng-option>
                                </ng-select>
                              </th>
                              <th>
                                <ng-select formControlName="filterNativeLanguage" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let language of LanguagesList" [value]="language.id">{{ language.languageName
                                    }}</ng-option>
                                </ng-select>
                              </th>
                              <th>
                                <ng-select formControlName="filterSecondLanguage" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let language of LanguagesList" [value]="language.id">{{ language.languageName
                                    }}</ng-option>
                                </ng-select>
                              </th>
                              <th>
                                <ng-select formControlName="filterContactSource" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let contactsource of ContactSourceList" [value]="contactsource.id">{{
                                    contactsource.name }}</ng-option>
                                </ng-select>
                              </th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterCompanyName" (keyup)="MinCharSearch($event,'CompanyName')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterDesignation" (keyup)="MinCharSearch($event,'Designation')"/></th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterWesbite" (keyup)="MinCharSearch($event,'Website')"/></th>
                              <th>
                                <ng-select formControlName="filterContactType" bindLabel="name" id="titleId" (change)="filterContact()"> -->
                                  <!-- <ng-option value="" selected>Select</ng-option> -->
                                  <!-- <ng-option *ngFor="let contactType of ContactTypeList" [value]="contactType.id">{{ contactType.name
                                    }}</ng-option>
                                </ng-select>
                              </th>
                              <th>

                                <div class="d-flex gap-2">
                                  <div class="position-relative w-50">
                                    <input type="date" class="form-control mb-3 mb-lg-0" formControlName="filterCreatedFrom" (change)="filterContact()"/>
                                    <span class="input-date-placeholder" for="filterCreatedFrom">From</span>
                                  </div>
                                  <div class="position-relative w-50">
                                    <input type="date" class="form-control mb-3 mb-lg-0" formControlName="filterCreatedTo" (change)="filterContact()"/>
                                    <span class="input-date-placeholder" for="filterCreatedTo">To</span>
                                  </div>
                                </div>
                              </th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterCreatedBy"/></th>
                              <th> -->
                                <!-- <input type="date" class="form-control mb-3 mb-lg-0" formControlName="filterUpdated" (change)="filterContact()"/> -->
                                <!-- <div class="d-flex gap-2 w-300px">
                                  <div class="position-relative w-50">
                                    <input type="date" class="form-control mb-3 mb-lg-0" formControlName="filterUpdatedFrom" (change)="filterContact()"/>
                                    <span class="input-date-placeholder" for="filterUpdatedFrom">From</span>
                                  </div>
                                  <div class="position-relative w-50">
                                    <input type="date" class="form-control mb-3 mb-lg-0" formControlName="filterUpdatedTo" (change)="filterContact()"/>
                                    <span class="input-date-placeholder" for="filterUpdatedTo">To</span>
                                  </div>
                                </div>
                              </th>
                              <th><input type="text" placeholder="Min. 3 chars" class="form-control mb-3 mb-lg-0" formControlName="filterUpdatedBy"/></th> -->
                            <!-- </form> -->
                              </thead>

                              <!-- end::Table Filter -->

                              <!-- begin::Table Body -->
                              <tbody *ngIf="ContactDetailsList.length > 0">
                                <tr *ngFor="let data of ContactDetailsList | paginate : { id:'lead_contact', itemsPerPage: pageSize, currentPage: pageNumber, totalItems: totalRecordContact}" >
                                  <th class="w-40px align-middle">
                                    <div
                                    class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                  >
                                    <input
                                      class="form-check-input cursor-pointer"
                                      type="radio"
                                      name="Contact"
                                      value="{{ data.id }}" [checked]="selectedLeadsContactId == data?.id" value="{{ data.id }}"
                                      (click)="onSelectContact(data?.id)"
                                    />
                                  </div>
                                  </th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.ref}}</th>
                                  <th class="kt_contact-details_toggle">
                                    <div class="d-flex gap-2 align-items-center">
                                      <ngx-avatar *ngIf="data?.profileImage == null || data?.profileImage == ''" size="26" class="avatar" [name]="data?.agentName"></ngx-avatar>
                                      <img *ngIf="data?.profileImage != null && data?.profileImage != ''" [src]="imgUrl + data?.profileImage" alt="Image Preview" [style.border-radius.px]="50" [style.width.px]="26" [style.height.px]="26">
                                      <!-- <ngx-avatar size="26" class="avatar" [name]="data?.agentName"></ngx-avatar> -->
                                      {{data?.agentName}}
                                    </div>
                                  </th>

                                  <!--Reference & Status-->
                                  <!-- <th class="kt_contact-details_toggle align-middle">{{data?.titleName}}</th> -->
                                  <th class="kt_contact-details_toggle align-middle">{{data?.firstName}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.lastName}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getMobile(1,data?.mobile)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getMobile(2,data?.mobile)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getMobile(3,data?.mobile)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getPhone(1,data?.phone)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getPhone(2,data?.phone)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getPhone(3,data?.phone)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getEmail(1,data?.email)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getEmail(2,data?.email)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getEmail(3,data?.email)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.contactTypeName}}</th>
                                  <!-- <th>{{getFax(1,data?.fax)}}</th>
                                  <th>{{getFax(2,data?.fax)}}</th>
                                  <th>{{getFax(3,data?.fax)}}</th> -->
                                  <!-- <th class="kt_contact-details_toggle align-middle">{{getPO(1,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getAddressLine1(1,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getAddressLine2(1,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getCity(1,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getZipCode(1,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getState(1,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getCountry(1,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getPO(2,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getAddressLine1(2,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getAddressLine2(2,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getCity(2,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getZipCode(2,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getState(2,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{getCountry(2,data?.contactAddress)}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.facebookLink}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.instagramLink}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.twitterLink}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.linkedinLink}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.googlePlusLink}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.skypeLink}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.weChatLink}}</th> -->
                                  <!-- <th>{{data?.websites}}</th> -->
                                  <!-- <th class="kt_contact-details_toggle align-middle">{{data?.websiteLink}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.vip ? 'Yes':'No'}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.genderName}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.dateOfBirth | date: "MM/dd/yyyy"}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.nationality1}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.nationality2}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.religionName}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.nativeLanguage}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.secondLanguage}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.sourceOfListing}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.companyName}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.designation}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.website}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.contactTypeName}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.created | date: "MM/dd/yyyy"}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.createdBy}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.updated | date: "MM/dd/yyyy"}}</th>
                                  <th class="kt_contact-details_toggle align-middle">{{data?.updatedBy}}</th> -->
                                </tr>
                              </tbody>
                              <!-- end::Table Body -->
                            </table>
                            <div
                                  class="text-center mt-5 mb-5"
                                *ngIf="ContactDetailsList && ContactDetailsList?.length == 0"
                                >
                                Record not available
                           </div>
                        </div>
                      </div>   
                      <div class="modal-footer py-3">
                        <div class="d-flex justify-content-between flex-column-reverse me-auto">
                          <pagination-controls *ngIf="ContactDetailsList.length > 0" (pageChange)="contactRenderPage($event)" id="lead_contact"></pagination-controls>
                          <span class="d-block mb-3">Showing {{ ContactDetailsList.length }} of <b>{{ totalRecordContact }}</b> Listings</span>
                      </div>
            
                      <button (click)="contactDataClose()" class="btn btn-sm btn-light btn-active-light-primary me-3">Cancel</button>
                      <button (click)="contactDataSave()" class="btn btn-sm btn-primary" [disabled]="tempSelectedContactRef == null">Apply</button>
                      </div>
                        <!-- <div class="modal-footer py-3">
                          <div class="d-flex justify-content-between w-100 flex-column-reverse">
                          
                            <pagination-controls *ngIf="ContactDetailsList.length > 0" (pageChange)="contactRenderPage($event)"></pagination-controls>
                            <span class="d-block mb-3">Showing {{ ContactDetailsList.length }} of <b>{{ totalRecordContact }}</b> Listings</span>
                          </div>

                          <button (click)="contactDataClose()" class="btn btn-sm btn-light btn-active-light-primary me-3">Cancel</button>
                          <button (click)="contactDataSave()" class="btn btn-sm btn-primary" [disabled]="tempSelectedContactRef == null">Apply</button>
                        </div> -->
                      </form>

                    </div>
                  </div>
                </ng-template>

                <!-- <ng-template #AddNewcontact>
                  <div class="modal-content advance-filter-modal">
                    <div class="modal-header py-3">
                      <h4 class="m-0">Add a New Contact</h4>
                      <div class="btn btn-sm btn-icon btn-active-color-primary" (click)="closeContact()">
                        <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                      </div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Title</label>
                      <div class="col-lg-6">
                        <div>
                          <ng-select formControlName="ContactTitle" bindLabel="ContactTitle" id="ContactTitleId">
                            <ng-option value="0">Select Title</ng-option>
                            <ng-option *ngFor="let title of AllTitle" [value]="title.id">{{ title.name }}</ng-option>
                          </ng-select>
                        </div>
                      </div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <label class="col-lg-3 col-form-label fw-bold fs-6 required">First Name</label>
                      <div class="col-lg-6">
                        <div>
                          <input class="form-control mb-3 mb-lg-0" id="ContactFirstNameId" type="text"
                            formControlName="ContactFirstName" />
                        </div>
                      </div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <label class="col-lg-3 col-form-label fw-bold fs-6 required">Last Name</label>
                      <div class="col-lg-6">
                        <div>
                          <input class="form-control mb-3 mb-lg-0" id="ContactLastNameId" type="text"
                            formControlName="ContactLastName" />
                        </div>
                      </div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Mobile</label>
                      <div class="col-lg-6"></div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <div class="col-lg-3">
                        <ng-select formControlName="mobileDropDown" bindLabel="mobileDropDown" id="mobileDropDownId">
                          <ng-option value="0">Select</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-6">
                        <ng-select formControlName="CountryCode" bindLabel="CountryCode" id="CountryCodeId">
                          <ng-option value="0">Select CountryCode</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-6 mt-3" style="margin-left: 14.7rem">
                        <input class="form-control mb-3 mb-lg-0" id="ContactMobileId" type="number"
                          formControlName="ContactMobile" />
                      </div>
                      <div class="row">
                        <div class="col-lg-3">
                          <span><i class="bi bi-plus"></i>Add mobile number</span>
                        </div>
                        <div class="col-lg-2">
                          <span><i class="bi bi-delete"></i>Delete</span>
                        </div>
                      </div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Phone</label>
                      <div class="col-lg-6"></div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <div class="col-lg-3">
                        <ng-select formControlName="phoneDropDown" bindLabel="phoneDropDown" id="phoneDropDownId">
                          <ng-option value="0">Select</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-6">
                        <ng-select formControlName="CountryCodePhone" bindLabel="CountryCodePhone"
                          id="CountryCodePhoneId">
                          <ng-option value="0">Select CountryCode</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-6 mt-3" style="margin-left: 14.7rem">
                        <input class="form-control mb-3 mb-lg-0" id="ContactMobileId" type="number"
                          formControlName="ContactMobile" />
                      </div>
                      <div class="row">
                        <div class="col-lg-3">
                          <span><i class="bi bi-plus"></i>Add mobile number</span>
                        </div>
                        <div class="col-lg-2">
                          <span><i class="bi bi-delete"></i>Delete</span>
                        </div>
                      </div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Email Address</label>
                      <div class="col-lg-12"></div>
                    </div>

                    <div class="row mb-6 ml-5">
                      <div class="col-lg-3">
                        <ng-select formControlName="ContactEmailAddress" bindLabel="ContactEmailAddress"
                          id="ContactEmailAddressId">
                          <ng-option value="0">Select</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-6">
                        <input class="form-control mb-3 mb-lg-0" id="ContactMobileId" type="email"
                          formControlName="ContactEmailAddress" />
                      </div>
                      <div class="row">
                        <div class="col-lg-3">
                          <span><i class="bi bi-plus"></i>Add Email Address</span>
                        </div>
                        <div class="col-lg-2">
                          <span><i class="bi bi-delete"></i>Delete</span>
                        </div>
                      </div>
                    </div>

                    <span
                      class="ml-3"
                      *ngIf="!this.viewAddress"
                      (click)="addAddressDetails()"
                      ><i class="bi bi-plus"></i>Add address details</span
                    >
                    <div class="mb-3 ml-3">
                      <a *ngIf="!this.viewAddress" (click)="addAddressDetails()"
                        class="btn btn-sm btn-flex btn-primary fw-bold me-1" id="">
                        <i class="bi bi-plus"></i> Add address details
                      </a>

                      <a *ngIf="this.viewAddress" (click)="addAddressDetails()"
                        class="btn btn-sm btn-flex btn-primary fw-bold me-1" id="">
                        <i class="bi bi-arrow"></i> Hide address details
                      </a>
                    </div>
                    <span
                      class="ml-3"
                      *ngIf="this.viewAddress"
                      (click)="addAddressDetails()"
                      ><i class="bi bi-minus"></i>Hide address details</span
                    >
                    <div *ngIf="this.viewAddress">
                      <div class="row mb-6 ml-5">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">PO Box</label>
                        <div class="col-lg-6">
                          <div>
                            <input class="form-control mb-3 mb-lg-0" id="POBoxId" type="text" formControlName="POBox" />
                          </div>
                        </div>
                      </div>

                      <div class="row mb-6 ml-5">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Address Line 1</label>
                        <div class="col-lg-6">
                          <div>
                            <input class="form-control mb-3 mb-lg-0" id="Address1Id" type="text"
                              formControlName="Address1" />
                          </div>
                        </div>
                      </div>

                      <div class="row mb-6 ml-5">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Address Line 2</label>
                        <div class="col-lg-6">
                          <div>
                            <input class="form-control mb-3 mb-lg-0" id="Address2Id" type="text"
                              formControlName="Address2" />
                          </div>
                        </div>
                      </div>

                      <div class="row mb-6 ml-5">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">City</label>
                        <div class="col-lg-6">
                          <div>
                            <input class="form-control mb-3 mb-lg-0" id="CityId" type="text" formControlName="City" />
                          </div>
                        </div>
                      </div>

                      <div class="row mb-6 ml-5">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Zip</label>
                        <div class="col-lg-6">
                          <div>
                            <input class="form-control mb-3 mb-lg-0" id="ZipId" type="text" formControlName="Zip" />
                          </div>
                        </div>
                      </div>

                      <div class="row mb-6 ml-5">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">State</label>
                        <div class="col-lg-6">
                          <div>
                            <input class="form-control mb-3 mb-lg-0" id="StateId" type="text" formControlName="State" />
                          </div>
                        </div>
                      </div>

                      <div class="row mb-6 ml-5">
                        <label class="col-lg-3 col-form-label fw-bold fs-6">Country</label>
                        <div class="col-lg-6">
                          <div>
                            <ng-select formControlName="CountryContact" bindLabel="CountryContact" id="CountryContactId">
                              <ng-option value="0">Select Country</ng-option>
                              <ng-option *ngFor="let country of AllCountry" [value]="country.id">{{ country.countryName
                                }}</ng-option>
                            </ng-select>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer py-3">
                      <a (click)="SaveContacts()" class="btn btn-sm btn-flex btn-primary fw-bold me-1" id="">
                        <i class="bi bi-right"></i> Save
                      </a>
                    </div>
                  </div>
                </ng-template> -->



                <!-- Basic Details -->
                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6"
                    >Enquiry Date</label
                  >
                  <div class="col-lg-6">
                    <input type="text" id="EnquiryDate" *ngIf="isEdit" class="form-control form-control-lg mb-3 mb-lg-0" formControlName="EnquiryDate" >
                    <input  *ngIf="!isEdit"
                      type="date"
                      id="EnquiryDateId"
                      class="form-control form-control-lg mb-3 mb-lg-0"
                      formControlName="EnquiryDate"
                    />
                  </div>
                </div>

                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required"
                    >Lead Type</label
                  >
                  <div class="col-lg-6">
                    <ng-select
                      formControlName="LeadType"
                      bindLabel="LeadType"  [ngClass]="isSave && LeadType.invalid ? 'border-error' : ''">
                      <ng-option
                        *ngFor="let type of LeadTypeList"
                        [value]="type.id"
                        >{{ type.name }}</ng-option
                      >
                    </ng-select>
                    <div *ngIf="isSave && LeadType.invalid" class="invalid-feedback d-block">
                      <div class="error-text">
                        Lead Type is required
                      </div>
                  </div>
                  </div>
                </div>
                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6"
                    >Priority</label
                  >
                  <div class="col-lg-6">
                    <ng-select
                      formControlName="Priority"
                      bindLabel="Priority"
                      id="PriorityId"
                    >
                      <ng-option
                        *ngFor="let p of AllPriorityType"
                        [value]="p.id"
                        >{{ p.name }}</ng-option
                      >
                    </ng-select>
                  </div>
                </div>
                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6">Hot Lead</label>
                  <div class="col-lg-6 d-flex align-items-center">
                    <div style="width: 40px !important">
                      <div class="form-check form-switch form-switch-sm form-check-custom form-check-solid">
                        <input
                          class="form-check-input cursor-pointer"
                          type="checkbox"
                          value="1"
                          formControlName="HotLead"
                          data-kt-check="true"
                          data-kt-check-target=".widget-9-check"
                        />
                      </div>
                    </div>
                  </div><!--./col-lg-6-->
                </div><!--./row-->
                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required"
                    >Source</label
                  >
                  <div class="col-lg-6">
                    <ng-select
                      formControlName="Source"
                      bindLabel="Source"  [ngClass]="isSave && Source.invalid ? 'border-error' : ''"
                    >
                      <ng-option
                        *ngFor="let s of sourceOfListingList"
                        [value]="s.id"
                        >{{ s.name }}</ng-option
                      >
                    </ng-select>

                    <div *ngIf="isSave && Source.invalid" class="invalid-feedback d-block">
                      <div class="error-text">
                        Source is required
                      </div>
                  </div>

                          <!-- <div class="error-text">Source is required</div> -->
                  </div>
                </div>





                <!-- <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required"
                    >Lead Type</label
                  >
                  <div class="col-lg-6">
                    <ng-select
                      formControlName="LeadType"
                      bindLabel="LeadType"
                      [class.is-invalid]="f['LeadType'].errors &&
                            (f['LeadType'].dirty ||
                              f['LeadType'].touched ||
                              f['LeadType'].invalid)
                          "  [ngClass]="f['LeadType'].errors &&
                            (f['LeadType'].dirty ||
                              f['LeadType'].touched ||
                              f['LeadType'].invalid)
                            ? 'border-error'
                            : ''
                        "
                    >
                      <ng-option
                        *ngFor="let type of LeadTypeList"
                        [value]="type.id"
                        >{{ type.name }}</ng-option
                      >
                    </ng-select>
                    <div
                    *ngIf="
                      f['LeadType'].errors &&
                        (f['LeadType'].dirty ||
                          f['LeadType'].touched ||
                          f['LeadType'].invalid)
                    "
                    class="invalid-feedback"
                  >
                    <div class="error-text">Lead Type is required</div>
                  </div>
                  </div>
                </div> -->


                <div class="row mb-6" *ngIf="BasicDetails.value.LeadType === 2">
                  <label class="col-lg-3 col-form-label fw-bold fs-6"
                    >Finance</label
                  >
                  <div class="col-lg-6">
                    <ng-select formControlName="Finance" bindLabel="name">
                      <ng-option
                        *ngFor="let f of AllLeadFinance"
                        [value]="f.id"
                        >{{ f.name }}</ng-option
                      >
                    </ng-select>
                  </div>
                </div>

                <!-- <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required"
                    >Status</label
                  >
                  <div class="col-lg-6">
                    <ng-select
                      formControlName="Status"
                      bindLabel="Status"
                      [class.is-invalid]="f['Status'].errors &&
                            (f['Status'].dirty ||
                              f['Status'].touched ||
                              f['Status'].invalid)
                          "
                          [ngClass]="f['Status'].errors &&
                            (f['Status'].dirty ||
                              f['Status'].touched ||
                              f['Status'].invalid)
                            ? 'border-error'
                            : ''"

                      (change)="onChangeSubStatus($event)"
                    >
                      <ng-option
                        *ngFor="let status of AllStatusType"
                        [value]="status.id"
                        >{{ status.name }}</ng-option
                      >
                    </ng-select>
                    <div
                    *ngIf="
                      f['Status'].errors &&
                        (f['Status'].dirty ||
                          f['Status'].touched ||
                          f['Status'].invalid)
                    "
                    class="invalid-feedback"
                  >
                    <div class="error-text">Status is required</div>
                  </div>
                  </div>
                </div> -->


                <!-- <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required"
                    >Sub Status</label
                  >
                  <div class="col-lg-6">
                    <ng-select
                      formControlName="SubStatus"
                      bindLabel="SubStatus"
                      id="SubStatusId"

                      [class.is-invalid]="f['SubStatus'].errors &&
                            (f['SubStatus'].dirty ||
                              f['SubStatus'].touched ||
                              f['SubStatus'].invalid)
                          "
                          [ngClass]="f['SubStatus'].errors &&
                            (f['SubStatus'].dirty ||
                              f['SubStatus'].touched ||
                              f['SubStatus'].invalid)
                            ? 'border-error'
                            : ''"
                    >
                      <ng-option
                        *ngFor="let sub of AllSubStatusType"
                        [value]="sub.id"
                        >{{ sub.name }}</ng-option
                      >
                    </ng-select>
                    <div
                    *ngIf="
                      f['SubStatus'].errors &&
                        (f['SubStatus'].dirty ||
                          f['SubStatus'].touched ||
                          f['SubStatus'].invalid)
                    "
                    class="invalid-feedback"
                  >
                    <div class="error-text">SubStatus is required</div>
                  </div>
                  </div>
                </div> -->



                <!-- <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6 required"
                    >Source</label
                  >
                  <div class="col-lg-6">
                    <ng-select
                      formControlName="Source"
                      bindLabel="Source"

                      [class.is-invalid]="f['Source'].errors &&
                            (f['Source'].dirty ||
                              f['Source'].touched ||
                              f['Source'].invalid)
                          "   [ngClass]="f['Source'].errors &&
                            (f['Source'].dirty ||
                              f['Source'].touched ||
                              f['Source'].invalid)
                            ? 'border-error'
                            : ''"
                    >
                      <ng-option
                        *ngFor="let s of sourceOfListingList"
                        [value]="s.id"
                        >{{ s.name }}</ng-option
                      >
                    </ng-select>
                    <div
                          *ngIf="
                            f['Source'].errors &&
                              (f['Source'].dirty ||
                                f['Source'].touched ||
                                f['Source'].invalid)
                          "
                          class="invalid-feedback"
                        >
                          <div class="error-text">Source is required</div>
                        </div>
                  </div>
                </div> -->


                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6">Agent Referral</label>
                  <div class="col-lg-6 d-flex align-items-center">
                    <div style="width: 40px !important">
                      <div class="form-check form-switch form-switch-sm form-check-custom form-check-solid">
                        <input
                          class="form-check-input cursor-pointer"
                          type="checkbox"
                          value="1"
                          formControlName="AgentReferral"
                          data-kt-check="true"
                          data-kt-check-target=".widget-9-check"
                        />
                      </div>
                    </div>
                  </div><!--./col-lg-6-->
                </div><!--./row-->

                <!-- <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6">Share this Lead</label>
                  <div class="col-lg-6 form-check form-switch form-switch-sm form-check-custom form-check-solid">
                    <input class="form-check-input cursor-pointer" type="radio" value="1" formControlName="ShareThisLead"
                      data-kt-check="true" data-kt-check-target=".widget-9-check" />
                  </div>
                </div> -->
            </div>
          </div>
        </div>
        <div class="accordion-item" id="sec2">
          <h2 class="accordion-header" id="kt_accordion_2_header_2">
            <button
              class="accordion-button fs-4 fw-semibold"
              type="button"
              [ngClass]="isSave && (PropertyRequirements.invalid && (PropertyRequirements.dirty || PropertyRequirements.touched) || (isProperty1Invalid || isProperty2Invalid || isProperty3Invalid || isProperty4Invalid)) ? 'border-error' : ''"
              (click)="onClickSlider()"
              (click)="PropertyReq = !PropertyReq"
              [class.collapsed]="!PropertyReq"
            >
              Property Requirements
            </button>
          </h2>
          <div
            id="kt_accordion_2_body_2"
            class="accordion-collapse collapse"
            [class.show]="PropertyReq"
          >
            <div class="accordion-body">
              <form>
                <div class="accordion" id="kt_accordion_1">

                  <ng-template #addPropertyRequirement>

                    <input type="hidden" formControlName="propertyId" />
                    <div class="modal-content advance-filter-modal">
                      <div class="modal-content">
                        <div class="modal-header py-3">
                          <!--begin::Modal title-->
                          <h4 class="m-0">Add Property Requirements</h4>
                          <!--end::Modal title-->
                          <div class="btn btn-sm btn-icon btn-active-color-primary" (click)="closePropertyRequirement()">
                            <i class="ki-duotone ki-cross fs-1">
                              <span class="path1"></span>
                              <span class="path2"></span>
                            </i>
                          </div>
                        </div>
                        <div class="modal-body">
                          <form [formGroup]="PropertyRequirements" class="advance-filter">
                            <div class="row mb-6">
                              <label class="col-lg-3 col-form-label fw-bold fs-6 required">Purpose</label>
                              <div class="col-lg-3">
                                <div>
                                  <ng-select formControlName="purposeId" bindLabel="name" [ngClass]="isPropertyReqApply && purpose.invalid ? 'border-error' : ''">
                                    <ng-option *ngFor="let c of AllPurpose" [value]="c.id">{{ c.name }}</ng-option>
                                  </ng-select>
                                  <div *ngIf="isPropertyReqApply && purpose.invalid" class="required-feedback">
                                    <div class="error-text">
                                      Purpose is required
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <label class="col-lg-3 col-form-label fw-bold fs-6 required">Property Type</label>
                              <div class="col-lg-3">
                                <div>
                                  <ng-select formControlName="categoryId" bindLabel="name" [ngClass]="isPropertyReqApply && propertyType.invalid ? 'border-error' : ''">
                                    <ng-option *ngFor="let c of AllCategory" [value]="c.id">{{ c.name }}</ng-option>
                                  </ng-select>
                                  <div *ngIf="isPropertyReqApply && propertyType.invalid" class="required-feedback">
                                    <div class="error-text">
                                      Property Type is required
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <label class="col-lg-3 col-form-label fw-bold fs-6">Unit</label>
                              <div class="col-lg-3">
                                <div>
                                  <input class="form-control mb-3 mb-lg-0" type="text" placeholder="" formControlName="unit" name="PropertyRequirementUnitType" />
                                </div>
                              </div>
                              <label class="col-lg-3 col-form-label fw-bold fs-6 required"> Emirate</label>
                              <div class="col-lg-3">
                                <div>
                                  <ng-select formControlName="emirateId" [ngClass]="isPropertyReqApply && emirate.invalid ? 'border-error' : ''" bindLabel="name" (change)="
                                                      selectEmirates($event,null)
                                                      ">
                                    <ng-option *ngFor="let e of AllEmirates" [value]="e.id">{{ e.name }}</ng-option>
                                  </ng-select>
                                  <div *ngIf="isPropertyReqApply && emirate.invalid" class="required-feedback">
                                    <div class="error-text">
                                      Emirate is required
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <label class="col-lg-3 col-form-label fw-bold fs-6">Location</label>
                              <div class="col-lg-3">
                                <div>
                                  <ng-select formControlName="locationId" bindLabel="name" (change)="
                                                          selectSubLocation($event,null)
                                                          ">
                                    <ng-option *ngFor="let l of AllLocation" [value]="l.id">{{ l.name }}</ng-option>
                                  </ng-select>
                                </div>
                              </div>
                              <label class="col-lg-3 col-form-label fw-bold fs-6">Sub Location</label>
                              <div class="col-lg-3">
                                <div>
                                  <ng-select formControlName="subLocationId" bindLabel="name">
                                    <ng-option *ngFor="let sub of AllSubLocation" [value]="sub.id">{{ sub.name }}</ng-option>
                                  </ng-select>
                                </div>
                              </div>


                              <label class="col-lg-3 col-form-label fw-bold fs-6">Min Beds</label>
                              <div class="col-lg-3">
                                <div>
                                  <ng-select formControlName="minBedsId" bindLabel="name">
                                    <ng-option *ngFor="let b of AllBeds" [value]="b.id">{{ b.name }}</ng-option>
                                  </ng-select>
                                </div>
                              </div>
                              <label class="col-lg-3 col-form-label fw-bold fs-6">Max Beds</label>
                              <div class="col-lg-3">
                                <div>
                                  <ng-select formControlName="maxBedsId" bindLabel="name">
                                    <ng-option *ngFor="let b of AllBeds" [value]="b.id">{{ b.name }}</ng-option>
                                  </ng-select>
                                </div>
                              </div>

                              <label class="col-lg-3 col-form-label fw-bold fs-6">Min Price</label>
                              <div class="col-lg-3">
                                <div class="input-group mb-5">
                                  <span class="input-group-text" id="basic-addon1">
                                    {{this.companySettings?.currency}}
                                  </span>
                                  <input class="form-control mb-3 mb-lg-0" type="text" placeholder="" formControlName="minPrice" name="minArea" />
                                </div>
                              </div>
                              <label class="col-lg-3 col-form-label fw-bold fs-6">Max Price</label>
                              <div class="col-lg-3">
                                <div class="input-group mb-5">
                                  <span class="input-group-text" id="basic-addon1">
                                    {{this.companySettings?.currency}}
                                  </span>
                                  <input class="form-control mb-3 mb-lg-0" type="text" placeholder="" formControlName="maxPrice" name="minArea" />
                                </div>
                              </div>

                              <label class="col-lg-3 col-form-label fw-bold fs-6">Min Built-up Area</label>
                              <div class="col-lg-3">
                                <div class="input-group mb-5">
                                  <span class="input-group-text" id="basic-addon1">
                                    {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}                                  </span>
                                  <input class="form-control mb-3 mb-lg-0" type="text" placeholder="" formControlName="minArea" name="minArea" />
                                </div>
                              </div>
                              <label class="col-lg-3 col-form-label fw-bold fs-6">Max Built-up Area</label>
                              <div class="col-lg-3">
                                <div class="input-group mb-5">
                                  <span class="input-group-text" id="basic-addon1">
                                    {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}                                  </span>
                                  <input class="form-control mb-3 mb-lg-0" type="text" placeholder="" formControlName="maxArea" name="maxArea"/>
                                </div>
                              </div>

                              <label class="col-lg-3 col-form-label fw-bold fs-6">Layout Type</label>
                              <div class="col-lg-3">
                                <div>
                                  <input class="form-control mb-3 mb-lg-0" type="text" placeholder="" formControlName="layoutType" name="PropertyRequirementUnitType"/>
                                </div>
                              </div>
                              
                            </div><!--./row-->
                          </form>
                        </div>
                        <div class="modal-footer py-3">
                          <button (click)="propertyReqClose()" class="btn btn-sm btn-light btn-active-light-primary me-3">Cancel</button>
                          <button (click)="saveAddPropertyRquirement(proprtyIdForListing)" class="btn btn-sm btn-primary">Apply</button>
                        </div>
                      </div><!--./modal-content-->
                    </div><!--./advance-filter-modal-->
                  </ng-template>

                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button
                        class="accordion-button fs-4 fw-semibold"
                        [ngClass]="isSave && isProperty1Invalid ? 'border-error' : ''"
                        type="button"
                        (click)="Property1 = !Property1"
                        [class.collapsed]="!Property1"
                      >
                        Property 1
                      </button>
                    </h2>
                    <div class="accordion-collapse collapse" [class.show]="Property1">
                      <div class="accordion-body">
                        <div class="mb-4 d-flex align-items-center justify-content-center gap-10"  *ngIf="propertyRequirementpopup">
                          <a href="javascript:void(0)" class="btn btn-bg-light btn-icon-primary btn-text-primary" (click)="AddProperty(1);testFucntion(1)">
                            <i class="bi bi-plus"></i> Add Property Requirement
                          </a>
                          <span class="d-inline-flex mx-3">OR</span>
                          <a (click)="addPropertyList(1)" class="btn btn-bg-light btn-icon-primary btn-text-primary">
                            <i class="bi bi-check2-square"></i> Select the Property Enquired For
                          </a>
                        </div>

                        <ng-template #addPropertyListing>
                          <form [formGroup]="form" novalidate="" class="form">
                            <div class="modal-content advance-filter-modal">
                              <div class="modal-header py-3">
                                <!--begin::Modal title-->
                                <h4 class="m-0">Select Property Listing</h4>
                                <!--end::Modal title-->
                                <div
                                  class="btn btn-sm btn-icon btn-active-color-primary"
                                  (click)="closePropertyList()"
                                >
                                  <i class="ki-duotone ki-cross fs-1"
                                    ><span class="path1"></span
                                    ><span class="path2"></span
                                  ></i>
                                </div>
                              </div>
                              <div class="modal-body p-0">
                                  <div class="table-responsive">
                                    <!-- begin::Table -->
                                    <table
                                      id="listings_row"
                                      class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"
                                    >
                                      <!-- begin::Table head -->
                                      <thead class="fw-bold">
                                        <th class="w-40px">
                                          <div
                                            class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                          ></div>
                                        </th>
                                        <th class="min-w-120px" (click)="listingData('Ref', !form.value.sortDirection, page, itemsPerPage)">Reference</th>
                                        <th class="min-w-120px" (click)="listingData('Status', !form.value.sortDirection, page, itemsPerPage)">Status</th>
                                        <th class="min-w-120px" (click)="listingData('Agent', !form.value.sortDirection, page, itemsPerPage)">Assigned To</th>
                                        <th class="min-w-120px" (click)="listingData('Usage', !form.value.sortDirection, page, itemsPerPage)">Usage</th>
                                        <th class="min-w-120px" (click)="listingData('Purpose', !form.value.sortDirection, page, itemsPerPage)">Purpose</th>
                                        <th class="min-w-120px" (click)="listingData('Category', !form.value.sortDirection, page, itemsPerPage)">Property Type</th>
                                        <th class="min-w-120px" (click)="listingData('Beds', !form.value.sortDirection, page, itemsPerPage)">Beds</th>
                                        <th class="min-w-120px" (click)="listingData('BUA', !form.value.sortDirection, page, itemsPerPage)">Built-up Area</th>
                                        <th class="min-w-120px" (click)="listingData('Emirate', !form.value.sortDirection, page, itemsPerPage)">Emirate</th>
                                        <th class="min-w-120px" (click)="listingData('Location', !form.value.sortDirection, page, itemsPerPage)">Location</th>
                                        <th class="min-w-120px" (click)="listingData('SubLocation', !form.value.sortDirection, page, itemsPerPage)">Sub Location</th>
                                        <th calls="min-w-120px" (click)="listingData('Unit', !form.value.sortDirection, page, itemsPerPage)">Unit No</th>
                                        <th class="min-w-120px" (click)="listingData('Price', !form.value.sortDirection, page, itemsPerPage)">Price</th>
                                        <th class="min-w-120px" (click)="listingData('OwnerFirstname', !form.value.sortDirection, page, itemsPerPage)">Owner First Name</th>
                                        <th class="min-w-120px" (click)="listingData('OwnerLastname', !form.value.sortDirection, page, itemsPerPage)">Owner Last Name</th>                                    </thead>
                                      <!-- begin::Table Filter -->
                                      <thead id="filter">
                                      <th></th>
                                      <th>
                                        <input
                                        class="form-control mb-3 mb-lg-0"
                                        type="text"
                                        placeholder="Min. 3 chars"
                                        formControlName="reference"
                                        name="reference"
                                        (keyup)="onFilterSelection('reference', $event, page, itemsPerPage)"
                                      />
                                      </th>
                                
                                  <th>
                                      <ng-select
                                        formControlName="status"
                                        bindLabel="name"
                                        (change)="
                                          onFilterSelectionDrp('status', $event, page, itemsPerPage)"
                                      >
                                        <ng-option *ngFor="let car of statusList" [value]="car.id">{{
                                          car.name
                                        }}</ng-option>
                                      </ng-select>

                                  </th>
                                  <th>
                                    <ng-select
                                      formControlName="assignedToId"
                                      bindLabel="name"
                                      (change)="
                                        onFilterSelectionDrp('assignedToId', $event, page, itemsPerPage)
                                      "
                                    >
                                      <ng-option *ngFor="let car of assignToList" [value]="car.id">{{car.name}}</ng-option>
                                    </ng-select>
                                  </th>
                                  <th>
                                    <ng-select
                                      formControlName="usageId"
                                      bindLabel="name"
                                      (change)="
                                        onFilterSelectionDrp('usageId', $event, page, itemsPerPage)
                                      "
                                    >
                                      <ng-option *ngFor="let car of usageList" [value]="car.id">{{
                                        car.name
                                      }}</ng-option>
                                    </ng-select>
                                  </th>
                                  <th>
                                <ng-select
                                  formControlName="purposeId"
                                  bindLabel="name"
                                  (change)="
                                    onFilterSelectionDrp('purposeId', $event, page, itemsPerPage)
                                  "
                                >
                                  <ng-option *ngFor="let car of purposeList" [value]="car.id">{{
                                    car.name
                                  }}</ng-option>
                                </ng-select>
                              </th>
                              <th>
                                  <ng-select
                                    formControlName="propertyTypeId"
                                    bindLabel="name"(change)="
                                    onFilterSelectionDrp('propertyTypeId', $event, page, itemsPerPage)
                                  "
                                  ><ng-option
                                        *ngFor="let c of AllCategory"
                                        [value]="c.id"
                                        >{{ c.name }}</ng-option
                                      ></ng-select>
                              </th>
                              <th>
                                <ng-select
                                  formControlName="bedsId"
                                  bindLabel="name"
                                  (change)="
                                    onFilterSelectionDrp('bedsId', $event, page, itemsPerPage)
                                  "
                                >
                                  <ng-option *ngFor="let car of bedList" [value]="car.id">{{
                                    car.name
                                  }}</ng-option>
                                </ng-select>
                              </th>

                              <th>
                                <div class="d-flex gap-2 w-200px">
                                  <input
                                    placeholder="From"
                                    formControlName="minBUA"
                                    class="form-control mb-3 mb-lg-0"
                                    mask="0*.00"
                                    [dropSpecialCharacters]="false"
                                    (keyup)="
                                    onFilterSelectionDecimal('minBUA', $event, page, itemsPerPage)
                                    "
                                  />
                                  <input
                                    placeholder="To"
                                    formControlName="maxBUA"
                                    mask="0*.00"
                                    [dropSpecialCharacters]="false"
                                    class="form-control mb-3 mb-lg-0"
                                    (keyup)="
                                    onFilterSelectionDecimal('maxBUA', $event, page, itemsPerPage)
                                    "
                                  />
                                </div>
                              </th>

                              <th>
                                  <ng-select
                                    formControlName="emiratesId"
                                    bindLabel="name"(change)="
                                    onFilterSelectionDrp('emiratesId', $event, page, itemsPerPage)
                                  "
                                  ><ng-option
                                  *ngFor="let car of AllEmirates"
                                  [value]="car.id"
                                  >{{ car.name }}</ng-option
                                >
                                  </ng-select>
                              </th>
                              <th>

                                      <ng-select
                                        formControlName="locationId"
                                        bindLabel="name"(change)="
                                        onFilterSelectionDrp('locationId', $event, page, itemsPerPage)
                                      "
                                      ><ng-option
                                      *ngFor="let car of AllLocation"
                                      [value]="car.id"
                                      >{{ car.name }}</ng-option
                                    >
                                      </ng-select>

                              </th>
                                <th>

                                              <ng-select
                                                formControlName="subLocationId"
                                                bindLabel="name"(change)="
                                                onFilterSelectionDrp('subLocationId', $event, page, itemsPerPage)
                                              "
                                              ><ng-option
                                              *ngFor="let car of AllSubLocation"
                                              [value]="car.id"
                                              >{{ car.name }}</ng-option
                                            >
                                              </ng-select>

                                        </th>
                                        <th>

                                            <input
                                              class="form-control mb-3 mb-lg-0"
                                              type="text"
                                              placeholder="Min. 3 chars"
                                              formControlName="unitNumber"
                                              name="unitNumber"
                                              style="min-width: 40px !important"
                                              (keyup)="onFilterSelection('unitNumber', $event, page, itemsPerPage)"
                                            />
                                        </th>
                                        <th>
                                          <div class="d-flex gap-2 w-200px">
                                            <input
                                              placeholder="From"
                                              formControlName="minPrice"
                                              class="form-control mb-3 mb-lg-0"
                                              mask="0*.00"
                                              [dropSpecialCharacters]="false"
                                              (keyup)="
                                                onFilterSelectionDecimal(
                                                  'minPrice',
                                                  $event,
                                                  page,
                                                  itemsPerPage
                                                )
                                              "
                                            />
                                            <input
                                              placeholder="To"
                                              formControlName="maxPrice"
                                              mask="0*.00"
                                              [dropSpecialCharacters]="false"
                                              class="form-control mb-3 mb-lg-0"
                                              (keyup)="
                                                onFilterSelectionDecimal(
                                                  'maxPrice',
                                                  $event,
                                                  page,
                                                  itemsPerPage
                                                )
                                              "
                                            />
                                          </div>
                                        </th>
                                        <th>
                                          <input
                                            placeholder="Min. 3 chars"
                                            formControlName="ownerFirstName"
                                            type="text"
                                            class="form-control mb-3 mb-lg-0"
                                            (keyup)="
                                              onFilterSelection('ownerFirstName', $event, page, itemsPerPage)
                                            "
                                          />
                                        </th>
                                        <th>
                                          <input style="border-bottom: 1px solid #e1e3ea"
                                            placeholder="Min. 3 chars"
                                            formControlName="ownerLastName"
                                            type="text"
                                            class="form-control mb-3 mb-lg-0"
                                            (keyup)="
                                              onFilterSelection('ownerLastName', $event, page, itemsPerPage)
                                            "
                                          />
                                        </th>

                                      </thead>
                                      <!-- end::Table Filter -->
                                      <tbody>
                                        <tr *ngFor="let listing of listingDetailsList  
                                        | paginate
                                        : {
                                            id:'lead_listings',
                                            itemsPerPage: listningItemPerPage,
                                            currentPage: page,
                                            totalItems: totalRecord
                                          }">
                                          <th class="w-40px">
                                            <div
                                              class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                            >
                                              <input
                                                class="form-check-input cursor-pointer"
                                                type="radio"
                                                name="Contact"
                                                value="{{ listing.id }}"
                                                [checked]="selectedPropertyListningId == listing?.id" value="{{ listing.id }}"
                                                (click)="onSelectListing(listing?.listingId)"
                                              />
                                            </div>
                                          </th>
                                          <th>{{ listing.reference }}</th>
                                          <th class="kt_activities_toggle align-middle" ><span [ngClass]="listing.statusName == 'Draft'? 'text-blue':listing.statusName == 'Published'?'text-green': 'text-orange'">{{ listing.statusName }}</span></th>
                                          <th><span class="d-flex gap-2 align-items-center">
                                            <ngx-avatar *ngIf="listing?.profileImage == null || listing?.profileImage == ''" size="26" class="avatar" [name]="listing?.agentName"></ngx-avatar>
                                            <img *ngIf="listing?.profileImage != null && listing?.profileImage != ''" [src]="imgUrl + listing?.profileImage" alt="Image Preview" [style.border-radius.px]="50" [style.width.px]="26" [style.height.px]="26">
                                            <!-- <ngx-avatar size="26" class="avatar" [name]="listing?.agentName"></ngx-avatar> -->
                                            {{ listing.agentName }}</span></th>
                                          <th>{{ listing.usageName }}</th>
                                          <th>{{ listing.purposeName }}</th>
                                          <th>{{ listing.propertytypeName}}</th>
                                          <th>{{ listing.bedsName}}</th>
                                          <th>{{ listing.buildUpArea}}</th>
                                          <th>{{ listing.emiratesName }}</th>
                                          <th>{{ listing.locationName }}</th>
                                          <th>{{ listing.subLocationName }}</th>
                                          <th>{{ listing.unitNumber }}</th>
                                          <th>{{ listing.price }}</th>
                                          <th>{{ listing.ownerFirstname }}</th>
                                          <th>{{ listing.ownerLastname }}</th>
                                        </tr>
                                      </tbody>
                                      <!-- end::Table Body -->
                                    </table>
                                    <div
                                        class="text-center mt-5 mb-5"
                                      *ngIf="listingDetailsList && listingDetailsList?.length == 0"
                                      >
                                      Record not available
                                    </div>
                                  </div>                              
                              </div>
                              <div class="modal-footer py-3">
                                  <div class="d-flex justify-content-between flex-column-reverse me-auto">
                                    <pagination-controls *ngIf="listingDetailsList.length > 0" (pageChange)="renderLeadsPage($event)" id="lead_listings"></pagination-controls>
                                    <span class="d-block mb-3">Showing {{ listingDetailsList.length }} of <b>{{ totalRecord }}</b> Listings</span>
                                  </div>
                      
                                  <button
                                  (click)="closeProperty()"
                                  class="btn btn-sm btn-light btn-active-light-primary me-3"
                                >
                                  Cancel
                                </button>
                                <button [disabled]="tempSelectedListningPropertyRef == null"
                                  (click)="SavePropertyListing(proprtyIdForListing)"
                                  class="btn btn-sm btn-primary"
                                >
                                  Apply
                                </button>
                              </div>
                            </div>
                          </form>
                        </ng-template>

                        <div class="row mb-6"   *ngIf="getDetail('Purpose',1) != undefined && getDetail('Purpose',1) != null && getDetail('Purpose',1) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Purpose</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Purpose", 1) }}</span
                              >
                            </div>
                          </div>
                        </div>

                        <div class="row mb-6"   *ngIf="getDetail('Category',1) != undefined && getDetail('Category',1) != null && getDetail('Category',1) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Property Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Category", 1) }}</span
                              >
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Emirate',1) != undefined && getDetail('Emirate',1) != null &&  getDetail('Emirate',1) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Emirate</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Emirate", 1)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Location',1) != undefined && getDetail('Location',1) != null && getDetail('Location',1) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Location", 1) === null ? propertyOneLocation : getDetail("Location", 1)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Sub-location',1) != undefined && getDetail('Sub-location',1) != null && getDetail('Sub-location',1) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Sub Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Sub-location", 1)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minBeds",1) && getDetail("maxBeds", 1) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Beds</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minBeds", 1) }} -
                                {{ getDetail("maxBeds", 1) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minBeds',1) != undefined && getDetail('minBeds',1) != null && getDetail('minBeds',1) != '') ||  (getDetail('maxBeds',1) != undefined && getDetail('maxBeds',1) != null && getDetail('maxBeds',1) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Beds</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',1) != undefined && getDetail('minBeds',1) != null && getDetail('minBeds',1) != '') &&  (getDetail('maxBeds',1) == undefined || getDetail('maxBeds',1) == null || getDetail('maxBeds',1) == '')">Min. {{ getDetail("minBeds", 1) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',1) == undefined || getDetail('minBeds',1) == null || getDetail('minBeds',1) == '') &&  (getDetail('maxBeds',1) != undefined && getDetail('maxBeds',1) != null && getDetail('maxBeds',1) != '')">Max. {{ getDetail("maxBeds", 1) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',1) != undefined && getDetail('minBeds',1) != null && getDetail('minBeds',1) != '') &&  (getDetail('maxBeds',1) != undefined && getDetail('maxBeds',1) != null && getDetail('maxBeds',1) != '')">{{ getDetail("minBeds", 1) }} - {{ getDetail("maxBeds", 1) }}</span>
                            
                          </div>
                        </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minPrice",1) && getDetail("maxPrice", 1) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Price</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">
                                {{ getDetail("minPrice", 1) }}
                                {{ getDetail("maxPrice", 1) }}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="(getDetail('minPrice',1) != undefined && getDetail('minPrice',1) != null &&  getDetail('minPrice',1) != '') || (getDetail('maxPrice',1) != undefined && getDetail('maxPrice',1) != null && getDetail('maxPrice',1) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Price</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',1) != undefined && getDetail('minPrice',1) != null && getDetail('minPrice',1) != '') &&  (getDetail('maxPrice',1) == undefined || getDetail('maxPrice',1) == null || getDetail('maxPrice',1) == '')">Min. {{this.companySettings?.currency}} {{ getDetail("minPrice", 1) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',1) == undefined || getDetail('minPrice',1) == null || getDetail('minPrice',1) == '') &&  (getDetail('maxPrice',1) != undefined && getDetail('maxPrice',1) != null && getDetail('maxPrice',1) != '')">Max. {{this.companySettings?.currency}} {{ getDetail("maxPrice", 1) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',1) != undefined && getDetail('minPrice',1) != null && getDetail('minPrice',1) != '') &&  (getDetail('maxPrice',1) != undefined && getDetail('maxPrice',1) != null && getDetail('maxPrice',1) != '')">{{this.companySettings?.currency}} {{ getDetail("minPrice", 1) }} - {{ getDetail("maxPrice", 1) }}</span>


                            
                          </div>
                        </div>
                        </div>

                        <!-- <div class="row mb-6" *ngIf='getDetail("minArea",1) && getDetail("maxArea", 1) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minArea", 1) }} -
                                {{ getDetail("maxArea", 1) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minArea',1) != undefined && getDetail('minArea',1) != null && getDetail('minArea',1) != '') || (getDetail('maxArea',1) != undefined && getDetail('maxArea',1) != null && getDetail('maxArea',1) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>

                              <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',1) != undefined && getDetail('minArea',1) != null && getDetail('minArea',1) != '') &&  (getDetail('maxArea',1) == undefined || getDetail('maxArea',1) == null || getDetail('maxArea',1) == '')">Min. {{ getDetail("minArea", 1) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',1) == undefined || getDetail('minArea',1) == null || getDetail('minArea',1) == '') &&  (getDetail('maxArea',1) != undefined && getDetail('maxArea',1) != null && getDetail('maxArea',1) != '')">Max. {{ getDetail("maxArea", 1) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            <span *ngIf="PropertyRequirementList.length > 0 && getDetail('minArea',1) != undefined && getDetail('minArea',1) != null && getDetail('minArea',1) != '' &&  getDetail('maxArea',1) != undefined && getDetail('maxArea',1) != null && getDetail('maxArea',1) != ''">{{ getDetail("minArea", 1) }} - {{ getDetail("maxArea", 1) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>

                              
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6">
                          <label class="col-lg-2 col-form-label fw-bold fs-6">Unit Type</label>
                          <div class="col-lg-6 pt-3">
                            <div><span>{{PropertyRequirementList[0]?.categoryId}}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="getDetail('layoutType',1) != undefined && getDetail('layoutType',1) != null && getDetail('layoutType',1) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Layout Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("layoutType", 1)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Unit',1) != undefined && getDetail('Unit',1) != null && getDetail('Unit',1) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Unit</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Unit", 1)
                              }}</span>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>

                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button
                        class="accordion-button fs-4 fw-semibold"
                        [ngClass]="isSave && isProperty2Invalid ? 'border-error' : ''"
                        type="button"
                        (click)="Property2 = !Property2"
                        [class.collapsed]="!Property2"
                      >
                        Property 2
                      </button>
                    </h2>
                    <div class="accordion-collapse collapse" [class.show]="Property2">
                      <div class="accordion-body">
                        <div class="mb-4 d-flex align-items-center justify-content-center gap-10" *ngIf="propertyRequirementpopup">
                          <a href="javascript:void(0)" class="btn btn-bg-light btn-icon-primary btn-text-primary" (click)="AddProperty(2);testFucntion(2)">
                            <i class="bi bi-plus"></i> Add Property Requirement
                          </a>
                          <span class="d-inline-flex mx-3">OR</span>
                          <a (click)="addPropertyList(2)" class="btn btn-bg-light btn-icon-primary btn-text-primary">
                            <i class="bi bi-check2-square"></i> Select the Property Enquired For
                          </a>
                        </div>

                        <ng-template #addPropertyListing>
                          <div class="modal-content advance-filter-modal">
                            <div class="modal-header py-3">
                              <!--begin::Modal title-->
                              <h4 class="m-0">Select Property Listing</h4>
                              <!--end::Modal title-->
                              <div
                                class="btn btn-sm btn-icon btn-active-color-primary"
                                (click)="closePropertyList()"
                              >
                                <i class="ki-duotone ki-cross fs-1"
                                  ><span class="path1"></span
                                  ><span class="path2"></span
                                ></i>
                              </div>
                            </div>
                            <form novalidate="" class="form">
                              <div
                                class="card-header align-items-center p-0 gap-2 gap-md-5"
                              >
                                <div class="table-responsive">
                                  <!-- begin::Table -->
                                  <table
                                    id="listings_row"
                                    class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"
                                  >
                                    <!-- begin::Table head -->
                                    <thead class="fw-bold">
                                      <th class="w-40px">
                                        <div
                                          class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                        ></div>
                                      </th>
                                      <th class="min-w-120px">Type</th>
                                      <th class="min-w-120px">Reference</th>
                                      <th class="min-w-120px">Unit</th>
                                      <th class="min-w-120px">Property Type</th>
                                      <th class="min-w-120px">Emirate</th>
                                      <th class="min-w-120px">Location</th>
                                      <th class="min-w-120px">Sub Location</th>
                                      <th class="min-w-120px">Beds</th>
                                      <th class="min-w-120px">Price</th>
                                      <th class="min-w-120px">Agent</th>
                                      <th class="min-w-120px">Owner</th>
                                      <th class="min-w-120px">Created</th>
                                      <th class="min-w-120px">Updated</th>
                                    </thead>

                                    <!-- begin::Table Filter -->
                                    <thead id="filter">
                                      <th>
                                        <div class="width-8 pl-0"></div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyType"
                                            bindLabel="name"
                                          >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyRef"
                                            name="PropertyRef"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyUnit"
                                            name="PropertyUnit"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyCategory"
                                            bindLabel="name"
                                          ><ng-option
                                          *ngFor="let c of AllCategory"
                                          [value]="c.id"
                                          >{{ c.name }}</ng-option
                                        >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyEmirates"
                                            bindLabel="name"
                                          >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div>
                                          <div class="width-8 pl-0">
                                            <span>Click to add Filter</span>
                                          </div>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <span>Click to add Filter</span>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyBeds"
                                            bindLabel="name"
                                          >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0"></div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyAgent"
                                            bindLabel="PropertyAgent"
                                            >ViewingAgent
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyOwner"
                                            name="PropertyOwner"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyListed"
                                            name="PropertyListed"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0"></div>
                                      </th>
                                    </thead>
                                    <!-- end::Table Filter -->
                                    <tbody></tbody>
                                    <!-- end::Table Body -->
                                  </table>

                                  <div class="text-center mt-5 mb-5">
                                    Record not available
                                  </div>
                                  <!-- end::Table -->
                                </div>
                              </div>
                            </form>
                          </div>
                        </ng-template>

                        <div class="row mb-6"   *ngIf="getDetail('Purpose',2) != undefined && getDetail('Purpose',2) != null && getDetail('Purpose',2) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Purpose</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Purpose", 2) }}</span
                              >
                            </div>
                          </div>
                        </div>

                        <div class="row mb-6"   *ngIf="getDetail('Category',2) != undefined && getDetail('Category',2) != null && getDetail('Category',2) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Property Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Category", 2) }}</span
                              >
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Emirate',2) != undefined && getDetail('Emirate',2) != null &&  getDetail('Emirate',2) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Emirate</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Emirate", 2)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Location',2) != undefined && getDetail('Location',2) != null && getDetail('Location',2) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Location", 2) === null ? propertyOneLocation : getDetail("Location", 2)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Sub-location',2) != undefined && getDetail('Sub-location',2) != null && getDetail('Sub-location',2) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Sub Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Sub-location", 2)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minBeds",2) && getDetail("maxBeds", 2) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Beds</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minBeds", 2) }} -
                                {{ getDetail("maxBeds", 2) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minBeds',2) != undefined && getDetail('minBeds',2) != null && getDetail('minBeds',2) != '') || (getDetail('maxBeds',2) != undefined && getDetail('maxBeds',2) != null && getDetail('maxBeds',2) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Beds</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',2) != undefined && getDetail('minBeds',2) != null && getDetail('minBeds',2) != '') &&  (getDetail('maxBeds',2) == undefined || getDetail('maxBeds',2) == null || getDetail('maxBeds',2) == '')">Min. {{ getDetail("minBeds", 2) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',2) == undefined || getDetail('minBeds',2) == null || getDetail('minBeds',2) == '') &&  (getDetail('maxBeds',2) != undefined && getDetail('maxBeds',2) != null && getDetail('maxBeds',2) != '')">Max. {{ getDetail("maxBeds", 2) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',2) != undefined && getDetail('minBeds',2) != null && getDetail('minBeds',2) != '') &&  (getDetail('maxBeds',2) != undefined && getDetail('maxBeds',2) != null && getDetail('maxBeds',2) != '')">{{ getDetail("minBeds", 2) }} - {{ getDetail("maxBeds", 2) }}</span>
                          </div>
                        </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minPrice",2) && getDetail("maxPrice", 2) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Price</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">
                                {{ getDetail("minPrice", 2) }}
                                {{ getDetail("maxPrice", 2) }}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="(getDetail('minPrice',2) != undefined && getDetail('minPrice',2) != null && getDetail('minPrice',2) != '') || (getDetail('maxPrice',2) != undefined && getDetail('maxPrice',2) != null && getDetail('maxPrice',2) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Price</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',2) != undefined && getDetail('minPrice',2) != null && getDetail('minPrice',2) != '') &&  (getDetail('maxPrice',2) == undefined || getDetail('maxPrice',2) == null || getDetail('maxPrice',2) == '')">Min. {{this.companySettings?.currency}} {{ getDetail("minPrice", 2) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',2) == undefined || getDetail('minPrice',2) == null || getDetail('minPrice',2) == '') &&  (getDetail('maxPrice',2) != undefined && getDetail('maxPrice',2) != null && getDetail('maxPrice',2) != '')">Max. {{this.companySettings?.currency}} {{ getDetail("maxPrice", 2) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',2) != undefined && getDetail('minPrice',2) != null && getDetail('minPrice',2) != '') &&  (getDetail('maxPrice',2) != undefined && getDetail('maxPrice',2) != null && getDetail('maxPrice',2) != '')">{{this.companySettings?.currency}} {{ getDetail("minPrice", 2) }} - {{ getDetail("maxPrice", 2) }}</span>
                          </div>
                        </div>
                        </div>

                        <!-- <div class="row mb-6" *ngIf='getDetail("minArea",2) && getDetail("maxArea", 2) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minArea", 2) }} -
                                {{ getDetail("maxArea", 2) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minArea',2) != undefined && getDetail('minArea',2) != null && getDetail('minArea',2) != '') || (getDetail('maxArea',2) != undefined && getDetail('maxArea',2) != null && getDetail('maxArea',2) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',2) != undefined && getDetail('minArea',2) != null && getDetail('minArea',2) != '') &&  (getDetail('maxArea',2) == undefined || getDetail('maxArea',2) == null || getDetail('maxArea',2) == '')">Min. {{ getDetail("minArea", 2) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',2) == undefined || getDetail('minArea',2) == null || getDetail('minArea',2) == '') &&  (getDetail('maxArea',2) != undefined && getDetail('maxArea',2) != null && getDetail('maxArea',2) != '')">Max. {{ getDetail("maxArea", 2) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',2) != undefined && getDetail('minArea',2) != null && getDetail('minArea',2) != '') &&  (getDetail('maxArea',2) != undefined && getDetail('maxArea',2) != null && getDetail('maxArea',2) != '')">{{ getDetail("minArea", 2) }} - {{ getDetail("maxArea", 2) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6">
                          <label class="col-lg-2 col-form-label fw-bold fs-6">Unit Type</label>
                          <div class="col-lg-6 pt-3">
                            <div><span>{{PropertyRequirementList[0]?.categoryId}}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="getDetail('layoutType',2) != undefined && getDetail('layoutType',2) != null && getDetail('layoutType',2) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Layout Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("layoutType", 2)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Unit',2) != undefined && getDetail('Unit',2) != null && getDetail('Unit',2) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Unit</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Unit", 2)
                              }}</span>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>

                  <div class="accordion-item" id="sec3">
                    <h2 class="accordion-header">
                      <button
                        class="accordion-button fs-4 fw-semibold"
                        type="button"
                        [ngClass]="isSave && isProperty3Invalid ? 'border-error' : ''"
                        (click)="Property3 = !Property3"
                        [class.collapsed]="!Property3"
                      >
                        Property 3
                      </button>
                    </h2>
                    <div class="accordion-collapse collapse" [class.show]="Property3">
                      <div class="accordion-body">
                        <div class="mb-4 d-flex align-items-center justify-content-center gap-10" *ngIf="propertyRequirementpopup">
                          <a href="javascript:void(0)" class="btn btn-bg-light btn-icon-primary btn-text-primary" (click)="AddProperty(3);testFucntion(3)">
                            <i class="bi bi-plus"></i> Add Property Requirement
                          </a>
                          <span class="d-inline-flex mx-3">OR</span>
                          <a (click)="addPropertyList(3)" class="btn btn-bg-light btn-icon-primary btn-text-primary">
                            <i class="bi bi-check2-square"></i> Select the Property Enquired For
                          </a>
                        </div>

                        <ng-template #addPropertyListing>
                          <div
                            class="modal-content advance-filter-modal">
                            <div class="modal-header py-3">
                              <!--begin::Modal title-->
                              <h4 class="m-0">Select Property Listing</h4>
                              <!--end::Modal title-->
                              <div
                                class="btn btn-sm btn-icon btn-active-color-primary"
                                (click)="closePropertyList()"
                              >
                                <i class="ki-duotone ki-cross fs-1"
                                  ><span class="path1"></span
                                  ><span class="path2"></span
                                ></i>
                              </div>
                            </div>
                            <form [formGroup]="Viewings">
                              <div class="row mb-6">
                                <label class="col-lg-3 col-form-label fw-bold fs-6">Listing</label>
                                <div class="col-lg-6">
                                  <div *ngIf="getListingUsingId">{{getListingUsingId?.reference}}</div>
                                  <div>
                                    <span (click)="openViewingList()"
                                      ><i class="bi bi-plus"></i> Select an existing Listing</span
                                    >
                                  </div>
                                </div>
                              </div>
                              <ng-template #ViewListing>
                                <form [formGroup]="form" novalidate="" class="form">
                                  <div class="modal-content advance-filter-modal">
                                    <div class="modal-header py-3">
                                      <!--begin::Modal title-->
                                      <h4 class="m-0">Select Listing</h4>
                                      <!--end::Modal title-->
                                      <div class="btn btn-sm btn-icon btn-active-color-primary" (click)="closeViewList()">
                                        <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                                      </div>
                                    </div>
                                    <div class="modal-body p-0">
                                      <div class="table-responsive">
                                        <!-- begin::Table -->
                                        <table id="listings_row" class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4">
                                          <!-- begin::Table head -->
                                          <thead class="fw-bold">
                                            <th class="w-40px">
                                              <!-- <div
                                                                            class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                                                          >
                                                                            <input
                                                                              class="form-check-input"
                                                                              type="checkbox"
                                                                              value="1"
                                                                              data-kt-check="true"
                                                                              data-kt-check-target=".widget-9-check"
                                                                            />
                                                                          </div> -->
                                            </th>
                              
                                            <!--Reference & Status-->
                                            <th class="min-w-120px" (click)="
                                                                            listingData('Ref', !form.value.sortDirection, page, itemsPerPage)
                                                                          ">
                                              Reference
                                            </th>
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Status',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Status
                                            </th>
                              
                                            <!--BasicDetails-->
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Agent',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Assigned To
                                            </th>
                              
                                            <!--Agent Email: hiding it for now -->
                              
                                            <!--./hiding-->
                              
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Usage',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Usage
                                            </th>
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Purpose',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Purpose
                                            </th>
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Category',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Property Type
                                            </th>
                              
                                            <th class="min-w-120px" (click)="
                                                                            listingData('Beds', !form.value.sortDirection, page, itemsPerPage)
                                                                          ">
                                              Beds
                                            </th>
                                            

                                            
                              
                                            <th class="min-w-120px" (click)="listingData('BUA', !form.value.sortDirection, page, itemsPerPage)">Built-up Area</th>
                              
                              
                              
                              
                              
                              
                              
                                            <!--Address-->
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Emirate',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Emirate
                                            </th>
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Location',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Location
                                            </th>
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'SubLocation',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Sub Location
                                            </th>
                              
                                            <th class="min-w-120px" (click)="
                                                                            listingData('Unit', !form.value.sortDirection, page, itemsPerPage)
                                                                          ">
                                              Unit No.
                                            </th>
                              
                              
                                            <!--Pricing-->
                              
                              
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'Price',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Price
                                            </th>
                              
                              
                              
                              
                              
                                            <!--Contact Details-->
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'OwnerFirstname',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Owner First Name
                                            </th>
                                            <th class="min-w-120px" (click)="
                                                                            listingData(
                                                                              'OwnerLastname',
                                                                              !form.value.sortDirection,
                                                                              page,
                                                                              itemsPerPage
                                                                            )
                                                                          ">
                                              Owner Last Name
                                            </th>
                              
                              
                                          </thead>
                                          <!-- end::Table head -->
                              
                                          <!-- begin::Table Filter -->
                                          <thead id="filter">
                                            <th></th>
                              
                                            <!--Reference & Status-->
                                            <th>
                                              <input placeholder="Min. 3 chars" formControlName="reference" class="form-control mb-3 mb-lg-0" (keyup)="
                                                                              onFilterSelection('reference', $event, page, itemsPerPage)
                                                                            " />
                                            </th>
                                            <th>
                                              <ng-select formControlName="status" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp('status', $event, page, itemsPerPage)
                                                                            ">
                                                <ng-option *ngFor="let car of statusList" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                              
                                            <!--BasicDetails-->
                                            <th>
                                              <!-- <input
                                                                              formControlName="agent"
                                                                              class="form-control mb-3 mb-lg-0"
                                                                              (keyup)="onFilterSelection('agent', $event, page, itemsPerPage
                                                              )"
                                                                            /> -->
                                              <ng-select formControlName="assignedToId" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp('assignedToId', $event, page, itemsPerPage)
                                                                            ">
                                                <ng-option *ngFor="let car of assignToList" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                              
                                            <!--Agent Email: hiding it for now -->
                              
                                            <!--./hiding-->
                              
                                            <th>
                                              <ng-select formControlName="usageId" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp('usageId', $event, page, itemsPerPage)
                                                                            ">
                                                <ng-option *ngFor="let car of usageList" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                              
                                            <th>
                                              <ng-select formControlName="purposeId" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp('purposeId', $event, page, itemsPerPage)
                                                                            ">
                                                <ng-option *ngFor="let car of purposeList" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                              
                                            <th>
                                              <ng-select formControlName="propertyTypeId" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp(
                                                                                'propertyTypeId',
                                                                                $event,
                                                                                page,
                                                                                itemsPerPage
                                                                              )
                                                                            ">
                                                <ng-option *ngFor="let car of propertyTypeList" [value]="car.id">{{ car.name }}</ng-option>
                                              </ng-select>
                                            </th>
                              
                                            <th>
                                              <ng-select formControlName="bedsId" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp('bedsId', $event, page, itemsPerPage)
                                                                            ">
                                                <ng-option *ngFor="let car of bedList" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                              
                                            <th>
                                              <div class="d-flex gap-2 w-200px">
                                                <input
                                                  placeholder="From"
                                                  formControlName="minBUA"
                                                  class="form-control mb-3 mb-lg-0"
                                                  mask="0*.00"
                                                  [dropSpecialCharacters]="false"
                                                  (keyup)="
                                                  onFilterSelectionDecimal('minBUA', $event, page, itemsPerPage)
                                                  "
                                                />
                                                <input
                                                  placeholder="To"
                                                  formControlName="maxBUA"
                                                  mask="0*.00"
                                                  [dropSpecialCharacters]="false"
                                                  class="form-control mb-3 mb-lg-0"
                                                  (keyup)="
                                                  onFilterSelectionDecimal('maxBUA', $event, page, itemsPerPage)
                                                  "
                                                />
                                              </div>
                                            </th>
                                            <!--Address-->
                                            <th>
                                              <ng-select formControlName="emiratesId" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp('emiratesId', $event, page, itemsPerPage)
                                                                            ">
                                                <ng-option *ngFor="let car of AllEmirates" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                                            <th>
                                              <ng-select formControlName="locationId" bindLabel="name" (change)="
                                                                              onFilterSelectionDrp('locationId', $event, page, itemsPerPage)
                                                                            ">
                                                <ng-option *ngFor="let car of AllLocation" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                                            <th>
                                              <ng-select formControlName="subLocationId" (change)="
                                                                              onFilterSelectionDrp(
                                                                                'subLocationId',
                                                                                $event,
                                                                                page,
                                                                                itemsPerPage
                                                                              )
                                                                            ">
                                                <ng-option *ngFor="let car of AllSubLocation" [value]="car.id">{{
                                                  car.name
                                                  }}</ng-option>
                                              </ng-select>
                                            </th>
                              
                                            <th>
                                              <input formControlName="unitNumber" class="form-control mb-3 mb-lg-0" (keyup)="
                                                                            onFilterSelection1st('unitNumber', $event, page, itemsPerPage)
                                                                            " />
                                            </th>
                              
                                            <th>
                                              <div class="d-flex gap-2 w-200px">
                                                <input placeholder="From" formControlName="minPrice" class="form-control mb-3 mb-lg-0" (keyup)="
                                                                                onFilterSelectionDecimal(
                                                                                  'minPrice',
                                                                                  $event,
                                                                                  page,
                                                                                  itemsPerPage
                                                                                )
                                                                              " />
                                                <input placeholder="To" formControlName="maxPrice" class="form-control mb-3 mb-lg-0" (keyup)="
                                                                                onFilterSelectionDecimal(
                                                                                  'maxPrice',
                                                                                  $event,
                                                                                  page,
                                                                                  itemsPerPage
                                                                                )
                                                                              " />
                                              </div>
                                            </th>
                              
                                            <th>
                                              <input placeholder="Min. 3 chars" formControlName="ownerFirstName" type="text"
                                                class="form-control mb-3 mb-lg-0" (keyup)="
                                                                              onFilterSelection('ownerFirstName', $event, page, itemsPerPage)
                                                                            " />
                                            </th>
                                            <th>
                                              <input placeholder="Min. 3 chars" formControlName="ownerLastName" type="text"
                                                class="form-control mb-3 mb-lg-0" style="border-bottom: 1px solid #e1e3ea;" (keyup)="
                                                                              onFilterSelection('ownerLastName', $event, page, itemsPerPage)
                                                                            " />
                                            </th>
                              
                                          </thead>
                                          <!-- end::Table Filter -->
                                          <!-- begin::Table Body -->
                                          <tbody *ngIf="listingDetailsList.length > 0">
                                            <tr *ngFor="
                                                                            let data of listingDetailsList
                                                                              | paginate
                                                                                : {
                                                                                    id:'leads_listing_popup',
                                                                                    itemsPerPage: itemsPerPage,
                                                                                    currentPage: page,
                                                                                    totalItems: totalRecord
                                                                                  }
                                                                          ">
                                              <th class="w-40px align-middle">
                                                <div class="form-check form-check-sm form-check-custom form-check-solid p-0">
                                                  <input class="form-check-input cursor-pointer" type="radio" name="Contact"
                                                    [checked]="selectedListingId == data?.id" value="{{ data.id }}"
                                                    (click)="onSelectListing(data?.listingId)" />
                                                </div>
                                              </th>
                                              <th class="kt_activities_toggle align-middle">{{ data.reference }}</th>
                                              <th class="kt_activities_toggle align-middle"><span
                                                  [ngClass]="data.statusName == 'Draft'? 'text-blue':data.statusName == 'Published'?'text-green': 'text-orange'">{{
                                                  data.statusName }}</span></th>
                                              <th class="kt_activities_toggle align-middle">
                                                <div class="d-flex gap-2">
                                                  <ngx-avatar *ngIf="data?.profileImage == null || data?.profileImage == ''" size="26" class="avatar" [name]="data?.agentName"></ngx-avatar>
                                                  <img *ngIf="data?.profileImage != null && data?.profileImage != ''" [src]="imgUrl + data?.profileImage" alt="Image Preview" [style.border-radius.px]="50" [style.width.px]="26" [style.height.px]="26">
                                                  <!-- <ngx-avatar size="26" class="avatar"
                                                    [name]="data?.agentName"></ngx-avatar> -->
                                                    {{ data.agentName }}</div>
                                              </th>
                                              <!--Agent Email: hiding it for now-->
                                              <!--./hiding it-->
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.usageName }}
                                              </th>
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.purposeName }}
                                              </th>
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.propertytypeName }}
                                              </th>
                              
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.bedsName }}
                                              </th>

                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.buildUpArea }}
                                              </th>
                              
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.emiratesName }}
                                              </th>
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.locationName }}
                                              </th>
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.subLocationName }}
                                              </th>
                              
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.unitNumber }}
                                              </th>
                              
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.price }}
                                              </th>
                              
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.ownerFirstname }}
                                              </th>
                                              <th class="kt_activities_toggle align-middle">
                                                {{ data.ownerLastname }}
                                              </th>
                              
                                            </tr>
                                          </tbody>
                                          <!-- end::Table Body -->
                                        </table>
                                        <div class="text-center mt-5 mb-5" *ngIf="listingDetailsList && listingDetailsList?.length == 0">
                                          Record not available
                                        </div>
                                        <!-- end::Table -->
                                      </div>
                                      <!-- end::Table container -->
                                    </div>
                                    <div class="modal-footer py-3">
                                      <div class="d-flex justify-content-between flex-column-reverse me-auto">
                                        <pagination-controls *ngIf="listingDetailsList.length > 0"
                                          (pageChange)="renderPage($event)" id="leads_listing_popup"></pagination-controls>
                                        <span class="d-block mb-3">Showing {{ listingDetailsList.length }} of <b>{{ totalRecord }}</b> Listings</span>
                                      </div>
                              
                                      <button (click)="ViewListingDataClose()"
                                        class="btn btn-sm btn-light btn-active-light-primary me-3">Cancel</button>
                                      <button (click)="ViewListingDataSave()" class="btn btn-sm btn-primary"
                                        [disabled]="tempSelectedLeadRef == null">Apply</button>
                              
                                    </div>
                                  </div>
                                </form>
                              
                              
                              
                              
                              </ng-template>
                            </form>


                          </div>
                        </ng-template>

                        <div class="row mb-6"   *ngIf="getDetail('Purpose',3) != undefined && getDetail('Purpose',3) != null && getDetail('Purpose',3) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Purpose</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Purpose", 3) }}</span
                              >
                            </div>
                          </div>
                        </div>

                        <div class="row mb-6"   *ngIf="getDetail('Category',3) != undefined && getDetail('Category',3) != null && getDetail('Category',3) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Property Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Category", 3) }}</span
                              >
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Emirate',3) != undefined && getDetail('Emirate',3) != null &&  getDetail('Emirate',3) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Emirate</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Emirate", 3)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Location',3) != undefined && getDetail('Location',3) != null && getDetail('Location',3) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Location", 3) === null ? propertyOneLocation : getDetail("Location", 3)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Sub-location',3) != undefined && getDetail('Sub-location',3) != null && getDetail('Sub-location',3) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Sub Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Sub-location", 3)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minBeds",3) && getDetail("maxBeds", 3) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Beds</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minBeds", 3) }} -
                                {{ getDetail("maxBeds", 3) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minBeds',3) != undefined && getDetail('minBeds',3) != null && getDetail('minBeds',3) != '') || (getDetail('maxBeds',3) != undefined && getDetail('maxBeds',3) != null && getDetail('maxBeds',3) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Beds</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',3) != undefined && getDetail('minBeds',3) != null && getDetail('minBeds',3) != '') &&  (getDetail('maxBeds',3) == undefined || getDetail('maxBeds',3) == null || getDetail('maxBeds',3) == '')">Min. {{ getDetail("minBeds", 3) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',3) == undefined || getDetail('minBeds',3) == null || getDetail('minBeds',3) == '') &&  (getDetail('maxBeds',3) != undefined && getDetail('maxBeds',3) != null && getDetail('maxBeds',3) != '')">Max. {{ getDetail("maxBeds", 3) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',3) != undefined && getDetail('minBeds',3) != null && getDetail('minBeds',3) != '') &&  (getDetail('maxBeds',3) != undefined && getDetail('maxBeds',3) != null && getDetail('maxBeds',3) != '')">{{ getDetail("minBeds", 3) }} - {{ getDetail("maxBeds", 3) }}</span>
                          </div>
                        </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minPrice",3) && getDetail("maxPrice", 3) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Price</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">
                                {{ getDetail("minPrice", 3) }}
                                {{ getDetail("maxPrice", 3) }}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="(getDetail('minPrice',3) != undefined && getDetail('minPrice',3) != null && getDetail('minPrice',3) != '') || ( getDetail('maxPrice',3) != undefined && getDetail('maxPrice',3) != null && getDetail('maxPrice',3) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Price</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',3) != undefined && getDetail('minPrice',3) != null && getDetail('minPrice',3) != '') &&  (getDetail('maxPrice',3) == undefined || getDetail('maxPrice',3) == null || getDetail('maxPrice',3) == '')">Min. {{this.companySettings?.currency}} {{ getDetail("minPrice", 3) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',3) == undefined || getDetail('minPrice',3) == null || getDetail('minPrice',3) == '') &&  (getDetail('maxPrice',3) != undefined && getDetail('maxPrice',3) != null && getDetail('maxPrice',3) != '')">Max. {{this.companySettings?.currency}} {{ getDetail("maxPrice", 3) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',3) != undefined && getDetail('minPrice',3) != null && getDetail('minPrice',3) != '') &&  (getDetail('maxPrice',3) != undefined && getDetail('maxPrice',3) != null && getDetail('maxPrice',3) != '')">{{this.companySettings?.currency}} {{ getDetail("minPrice", 3) }} - {{ getDetail("maxPrice", 3) }}</span>
                          </div>
                        </div>
                        </div>

                        <!-- <div class="row mb-6" *ngIf='getDetail("minArea",3) && getDetail("maxArea", 3) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minArea", 3) }} -
                                {{ getDetail("maxArea", 3) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minArea',3) != undefined && getDetail('minArea',3) != null && getDetail('minArea',3) != '') ||  (getDetail('maxArea',3) != undefined && getDetail('maxArea',3) != null && getDetail('maxArea',3) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',3) != undefined && getDetail('minArea',3) != null && getDetail('minArea',3) != '') &&  (getDetail('maxArea',3) == undefined || getDetail('maxArea',3) == null || getDetail('maxArea',3) == '')">Min. {{ getDetail("minArea", 3) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',3) == undefined || getDetail('minArea',3) == null || getDetail('minArea',3) == '') &&  (getDetail('maxArea',3) != undefined && getDetail('maxArea',3) != null && getDetail('maxArea',3) != '')">Max. {{ getDetail("maxArea", 3) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',3) != undefined && getDetail('minArea',3) != null && getDetail('minArea',3) != '') &&  (getDetail('maxArea',3) != undefined && getDetail('maxArea',3) != null && getDetail('maxArea',3) != '')">{{ getDetail("minArea", 3) }} - {{ getDetail("maxArea", 3) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6">
                          <label class="col-lg-2 col-form-label fw-bold fs-6">Unit Type</label>
                          <div class="col-lg-6 pt-3">
                            <div><span>{{PropertyRequirementList[0]?.categoryId}}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="getDetail('layoutType',3) != undefined && getDetail('layoutType',3) != null && getDetail('layoutType',3) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Layout Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("layoutType", 3)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Unit',3) != undefined && getDetail('Unit',3) != null && getDetail('Unit',3) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Unit</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Unit", 3)
                              }}</span>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>

                  <div class="accordion-item" id="sec4">
                    <h2 class="accordion-header">
                      <button
                        class="accordion-button fs-4 fw-semibold"
                        type="button"
                        [ngClass]="isSave && isProperty4Invalid ? 'border-error' : ''"
                        (click)="Property4 = !Property4"
                        [class.collapsed]="!Property4"
                      >
                        Property 4
                      </button>
                    </h2>
                    <div class="accordion-collapse collapse" [class.show]="Property4">
                      <div class="accordion-body">
                        <div class="mb-4 d-flex align-items-center justify-content-center gap-10" *ngIf="propertyRequirementpopup">
                          <a href="javascript:void(0)" class="btn btn-bg-light btn-icon-primary btn-text-primary" (click)="AddProperty(4);testFucntion(4)">
                            <i class="bi bi-plus"></i> Add Property Requirement
                          </a>
                          <span class="d-inline-flex mx-3">OR</span>
                          <a (click)="addPropertyList(4)" class="btn btn-bg-light btn-icon-primary btn-text-primary">
                            <i class="bi bi-check2-square"></i> Select the Property Enquired For
                          </a>
                        </div>

                        <!-- <div class="row mb-6">
                          <label class="col-lg-2 col-form-label fw-bold fs-6">Emirate</label>
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span>{{ getDetail("Emirate", 4) }}</span>
                            </div>
                          </div>
                        </div>
                         -->

                        <ng-template #addPropertyListing>
                          <div
                            class="modal-content advance-filter-modal"
                          >
                            <div class="modal-header py-3">
                              <!--begin::Modal title-->
                              <h4 class="m-0">Select Property Listing</h4>
                              <!--end::Modal title-->
                              <div
                                class="btn btn-sm btn-icon btn-active-color-primary"
                                (click)="closePropertyList()"
                              >
                                <i class="ki-duotone ki-cross fs-1"
                                  ><span class="path1"></span
                                  ><span class="path2"></span
                                ></i>
                              </div>
                            </div>
                            <form novalidate="" class="form">
                              <div
                                class="card-header align-items-center p-0 gap-2 gap-md-5"
                              >
                                <div class="table-responsive">
                                  <!-- begin::Table -->
                                  <table
                                    id="listings_row"
                                    class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"
                                  >
                                    <!-- begin::Table head -->
                                    <thead class="fw-bold">
                                      <th class="w-40px">
                                        <div
                                          class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                        ></div>
                                      </th>
                                      <th class="min-w-120px">Type</th>
                                      <th class="min-w-120px">Reference</th>
                                      <th class="min-w-120px">Unit</th>
                                      <th class="min-w-120px">Property Type</th>
                                      <th class="min-w-120px">Emirate</th>
                                      <th class="min-w-120px">Location</th>
                                      <th class="min-w-120px">Sub Location</th>
                                      <th class="min-w-120px">Beds</th>
                                      <th class="min-w-120px">Price</th>
                                      <th class="min-w-120px">Agent</th>
                                      <th class="min-w-120px">Owner</th>
                                      <th class="min-w-120px">Created</th>
                                      <th class="min-w-120px">Updated</th>
                                    </thead>

                                    <!-- begin::Table Filter -->
                                    <thead id="filter">
                                      <th>
                                        <div class="width-8 pl-0"></div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyType"
                                            bindLabel="name"
                                          >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyRef"
                                            name="PropertyRef"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyUnit"
                                            name="PropertyUnit"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyCategory"
                                            bindLabel="name"
                                          >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyEmirates"
                                            bindLabel="name"
                                          >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div>
                                          <div class="width-8 pl-0">
                                            <span>Click to add Filter</span>
                                          </div>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <span>Click to add Filter</span>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyBeds"
                                            bindLabel="name"
                                          >
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0"></div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <ng-select
                                            formControlName="PropertyAgent"
                                            bindLabel="PropertyAgent"
                                            >ViewingAgent
                                          </ng-select>
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyOwner"
                                            name="PropertyOwner"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0">
                                          <input
                                            class="form-control mb-3 mb-lg-0"
                                            type="text"
                                            placeholder=""
                                            formControlName="PropertyListed"
                                            name="PropertyListed"
                                            style="min-width: 40px !important"
                                          />
                                        </div>
                                      </th>
                                      <th>
                                        <div class="width-8 pl-0"></div>
                                      </th>
                                    </thead>
                                    <!-- end::Table Filter -->
                                          <tbody>
                                            <tr *ngFor="let listing of listingDetailsList">
                                              <th class="w-40px">
                                                <div
                                                  class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                                >
                                                  <input
                                                    class="form-check-input cursor-pointer"
                                                    type="radio"
                                                    name="Contact"
                                                    value="{{ listing.id }}"
                                                    (click)="onSelectListing(listing?.listingId)"
                                                  />
                                                </div>
                                              </th>
                                              <th>{{ listing.purposeName }}</th>
                                              <th>{{ listing.reference }}</th>
                                              <th>{{ listing.unitNumber }}</th>
                                              <th>{{ listing.propertytypeName }}</th>
                                              <th>{{ listing.emiratesName }}</th>
                                              <th>{{ listing.locationName }}</th>
                                              <th>{{ listing.subLocationName }}</th>
                                              <th>{{ listing.bedsName }}</th>
                                              <th>{{ listing.price }}</th>
                                              <th>{{ listing.agentName }}</th>
                                              <th>{{ listing.ownerFirstname }}</th>
                                              <th></th>
                                              <th>{{ listing.updated  | date : "dd/MM/yyyy"}}</th>
                                            </tr>
                                          </tbody>
                                    <!-- end::Table Body -->
                                  </table>

                                  <div class="text-center mt-5 mb-5">
                                    Record not available
                                  </div>
                                  <!-- end::Table -->
                                </div>
                              </div>
                            </form>
                          </div>
                        </ng-template>

                        <div class="row mb-6"   *ngIf="getDetail('Purpose',4) != undefined && getDetail('Purpose',4) != null && getDetail('Purpose',4) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Purpose</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Purpose", 4) }}</span
                              >
                            </div>
                          </div>
                        </div>

                        <div class="row mb-6"   *ngIf="getDetail('Category',4) != undefined && getDetail('Category',4) != null && getDetail('Category',4) != ''" >
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Property Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span
                                class="fs-6"
                                *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("Category", 4) }}</span
                              >
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Emirate',4) != undefined && getDetail('Emirate',4) != null &&  getDetail('Emirate',4) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Emirate</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Emirate", 4)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Location',4) != undefined && getDetail('Location',4) != null && getDetail('Location',4) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Location", 4) === null ? propertyOneLocation : getDetail("Location", 4)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Sub-location',4) != undefined && getDetail('Sub-location',4) != null && getDetail('Sub-location',4) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Sub Location</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Sub-location", 4)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minBeds",4) && getDetail("maxBeds", 4) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Beds</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minBeds", 4) }} -
                                {{ getDetail("maxBeds", 4) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minBeds',4) != undefined && getDetail('minBeds',4) != null && getDetail('minBeds',4) != '') ||   (getDetail('maxBeds',4) != undefined && getDetail('maxBeds',4) != null && getDetail('maxBeds',4) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Beds</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',4) != undefined && getDetail('minBeds',4) != null && getDetail('minBeds',4) != '') &&  (getDetail('maxBeds',4) == undefined || getDetail('maxBeds',4) == null || getDetail('maxBeds',4) == '')">Min. {{ getDetail("minBeds", 4) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',4) == undefined || getDetail('minBeds',4) == null || getDetail('minBeds',4) == '') &&  (getDetail('maxBeds',4) != undefined && getDetail('maxBeds',4) != null && getDetail('maxBeds',4) != '')">Max. {{ getDetail("maxBeds", 4) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minBeds',4) != undefined && getDetail('minBeds',4) != null && getDetail('minBeds',4) != '') &&  (getDetail('maxBeds',4) != undefined && getDetail('maxBeds',4) != null && getDetail('maxBeds',4) != '')">{{ getDetail("minBeds", 4) }} - {{ getDetail("maxBeds", 4) }}</span>
                          </div>
                        </div>
                        </div>
                        <!-- <div class="row mb-6" *ngIf='getDetail("minPrice",4) && getDetail("maxPrice", 4) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Price</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">
                                {{ getDetail("minPrice", 4) }}
                                {{ getDetail("maxPrice", 4) }}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="(getDetail('minPrice',4) != undefined && getDetail('minPrice',4) != null && getDetail('minPrice',4) != '') || (getDetail('maxPrice',4) != undefined && getDetail('maxPrice',4) != null && getDetail('maxPrice',4) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                          >Price</label
                        >
                        <div class="col-lg-6 pt-3">
                          <div>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',4) != undefined && getDetail('minPrice',4) != null && getDetail('minPrice',4) != '') &&  (getDetail('maxPrice',4) == undefined || getDetail('maxPrice',4) == null || getDetail('maxPrice',4) == '')">Min. {{this.companySettings?.currency}} {{ getDetail("minPrice", 4) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',4) == undefined || getDetail('minPrice',4) == null || getDetail('minPrice',4) == '') &&  (getDetail('maxPrice',4) != undefined && getDetail('maxPrice',4) != null && getDetail('maxPrice',4) != '')">Max. {{this.companySettings?.currency}} {{ getDetail("maxPrice", 4) }}</span>
                            <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minPrice',4) != undefined && getDetail('minPrice',4) != null && getDetail('minPrice',4) != '') &&  (getDetail('maxPrice',4) != undefined && getDetail('maxPrice',4) != null && getDetail('maxPrice',4) != '')">{{this.companySettings?.currency}} {{ getDetail("minPrice", 4) }} - {{ getDetail("maxPrice", 4) }}</span>
                          </div>
                        </div>
                        </div>

                        <!-- <div class="row mb-6" *ngIf='getDetail("minArea",4) && getDetail("maxArea", 4) != undefined'>
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0"
                                >{{ getDetail("minArea", 4) }} -
                                {{ getDetail("maxArea", 4) }}</span
                              >
                            </div>
                          </div>
                        </div> -->
                        <div  class="row mb-6" *ngIf="(getDetail('minArea',4) != undefined && getDetail('minArea',4) != null && getDetail('minArea',4) != '') || (getDetail('maxArea',4) != undefined && getDetail('maxArea',4) != null && getDetail('maxArea',4) != '')">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >BUA</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',4) != undefined && getDetail('minArea',4) != null && getDetail('minArea',4) != '') &&  (getDetail('maxArea',4) == undefined || getDetail('maxArea',4) == null || getDetail('maxArea',4) == '')">Min. {{ getDetail("minArea", 4) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                              <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',4) == undefined || getDetail('minArea',4) == null || getDetail('minArea',4) == '') &&  (getDetail('maxArea',4) != undefined && getDetail('maxArea',4) != null && getDetail('maxArea',4) != '')">Max. {{ getDetail("maxArea", 4) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                              <span *ngIf="(PropertyRequirementList.length > 0) && (getDetail('minArea',4) != undefined && getDetail('minArea',4) != null && getDetail('minArea',4) != '') &&  (getDetail('maxArea',4) != undefined && getDetail('maxArea',4) != null && getDetail('maxArea',4) != '')">{{ getDetail("minArea", 4) }} - {{ getDetail("maxArea", 4) }} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
                            </div>
                          </div>
                        </div>
                        <!-- <div class="row mb-6">
                          <label class="col-lg-2 col-form-label fw-bold fs-6">Unit Type</label>
                          <div class="col-lg-6 pt-3">
                            <div><span>{{PropertyRequirementList[0]?.categoryId}}</span>
                            </div>
                          </div>
                        </div> -->
                        <div class="row mb-6" *ngIf="getDetail('layoutType',4) != undefined && getDetail('layoutType',4) != null && getDetail('layoutType',4) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Layout Type</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("layoutType", 4)
                              }}</span>
                            </div>
                          </div>
                        </div>
                        <div class="row mb-6" *ngIf="getDetail('Unit',4) != undefined && getDetail('Unit',4) != null && getDetail('Unit',4) != ''">
                          <label class="col-lg-2 col-form-label fw-bold fs-6"
                            >Unit</label
                          >
                          <div class="col-lg-6 pt-3">
                            <div>
                              <span *ngIf="PropertyRequirementList.length > 0">{{
                                getDetail("Unit", 4)
                              }}</span>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="vewingsDatacontent p-10" *ngIf="selectedTab === 'tab2'"  id="viewingSec1">
        <div *ngIf="isEdit">
          <a *ngIf="addViewingButton" (click)="onViewingAdd()"
          class="kt_activities_toggle btn btn-sm btn-flex btn-primary fw-bold me-1"
        >
          <i class="bi bi-plus fs-2"></i> Add Viewing
           </a>
        </div>
        <div *ngIf="isEdit">
          <form [formGroup]="Viewings" *ngIf="viewingDataForm">
            <div class="row mb-6">
              <label style="margin-left: -37px;
              padding-inline: 46px;" class="col-lg-3 col-form-label fw-bold fs-6" >Status</label>
              <div class="col-lg-6">
                <ng-select style="    margin-left: 36px;
                width: 394px;" appendTo=".col-lg-6" formControlName="statusId" bindLabel="status" [clearable]="false" [ngClass]="Viewings.get('statusId')?.value == 1? 'ph-status-dropdown text-blue':Viewings.get('statusId')?.value == 2?'ph-status-dropdown text-green': Viewings.get('statusId')?.value == 3?'ph-status-dropdown text-red':Viewings.get('statusId')?.value == 4 ? 'ph-status-dropdown text-grey':''">
                  <ng-option *ngFor="let vs of AllViewingStatus" [value]="vs.id">{{ vs.name }}</ng-option>
                </ng-select>
              </div>
            </div>
            <div class="row mb-6">
              <label style="margin-left: -37px;padding-inline: 46px;" class="col-lg-3 col-form-label fw-bold fs-6 required" >Assigned To</label>
              <div class="col-lg-6" id="viewingSec1">
                <ng-select (click)="scrollToElement('viewingSec1');" [ngClass]="isViewingSave && viewingAgentId.invalid  ? 'border-error' : ''" style="margin-left: 36px; width: 394px;"
                appendTo=".col-lg-6" formControlName="viewingAgentId" bindLabel="agent" [clearable]="false">
                <ng-option *ngFor="let assignee of assignToList" [value]="assignee.id">
                  <span class="d-flex gap-2 align-items-center">
                    <ngx-avatar *ngIf="assignee.profileImage == null || assignee.profileImage == ''" size="26" class="avatar" [name]="assignee?.name"></ngx-avatar>
                    <img *ngIf="assignee.profileImage != null && assignee.profileImage != ''" [src]="assignee.profileImage" alt="Image Preview" [style.border-radius.px]="50" [style.width.px]="26" [style.height.px]="26">
                    {{ assignee.name }}</span></ng-option>
              </ng-select>
                <div *ngIf="isViewingSave && viewingAgentId.invalid" class="invalid-feedback d-block">
                  <div class="error-text" style="padding-left: 37px;">
                    Assigned To is required
                  </div>
              </div>
              </div>
            </div>
            <div class="row mb-6" id="viewingSec1">
              <label class="col-lg-3 col-form-label fw-bold fs-6 required">Listing</label>
              <div class="col-lg-6">

                <div>
                  <a [ngClass]="getListingUsingId !== undefined ? isViewingSave && getListingUsingId === '' ? 'border-error': '' :isViewingSave && getListingUsingId === undefined ? 'border-error': ''" (click)="openViewingList()"  class="btn btn-bg-light btn-icon-primary btn-text-primary">
                        <i class="bi bi-check2-square"></i> Select Listing
                </a>
                <div *ngIf="getListingUsingId !== undefined ? isViewingSave && getListingUsingId === '' ? 'border-error': '' :isViewingSave && getListingUsingId === undefined ? 'border-error': ''" >
                  <div style="padding-top: 5px;
                  font-size: 12px;
                  color: red;">
                    Listing is required
                  </div>
    </div>
                </div>
              </div>
              <div class="pt-5" *ngIf="getListingUsingId" id="sec1">
                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6">Listing Reference</label>
                  <div class="col-lg-6 d-flex align-items-center">
                    {{getListingUsingId?.reference}}
                  </div>
                </div><!--./row-->
                <div class="row mb-6">
                  <label class="col-lg-3 col-form-label fw-bold fs-6">Purpose</label>
                  <div class="col-lg-6 d-flex align-items-center">
                    {{getListingUsingId?.purposeName}}
                  </div>
                </div><!--./row-->
                <carousel class="ph-carousel pb-0" *ngIf="getListingUsingId">
                  <slide>
                    <!-- Slide 1 content -->
                    <div class="row mb-6">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Property Type</label>
                      <div class="col-lg-6 d-flex align-items-center">
                        {{getListingUsingId?.propertytypeName}}
                      </div>
                    </div><!--./row-->
                    <div class="row mb-6">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Beds</label>
                      <div class="col-lg-6 d-flex align-items-center">
                        {{getListingUsingId?.bedsName}}
                    </div>
                    </div><!--./row-->
                    <div class="row mb-6">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Emirate</label>
                      <div class="col-lg-6 d-flex align-items-center">
                        {{getListingUsingId?.emiratesName}}
                    </div>
                    </div><!--./row-->
                    <div class="row mb-6">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Location</label>
                      <div class="col-lg-6 d-flex align-items-center">
                        {{getListingUsingId?.locationName}}
                      </div>
                    </div><!--./row-->
                    <div class="row mb-6">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Sub Location</label>
                      <div class="col-lg-6 d-flex align-items-center">
                        {{getListingUsingId?.subLocationName}}
                      </div>
                    </div><!--./row-->
                    <div class="row">
                      <label class="col-lg-3 col-form-label fw-bold fs-6">Price</label>
                      <div class="col-lg-6 d-flex align-items-center">
                        {{getListingUsingId?.price}}
                      </div>
                    </div><!--./row-->
                  </slide>
                </carousel>

              </div>
            </div>
            <ng-template #ViewListing>
              <form [formGroup]="form" novalidate="" class="form">
                <div class="modal-content advance-filter-modal">
                  <div class="modal-header py-3">
                    <!--begin::Modal title-->
                    <h4 class="m-0">Select Listing</h4>
                    <!--end::Modal title-->
                    <div class="btn btn-sm btn-icon btn-active-color-primary" (click)="closeViewList()">
                      <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                  </div>
                  <div class="modal-body p-0">
                    <div class="table-responsive">
                      <!-- begin::Table -->
                      <table id="listings_row" class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4">
                        <!-- begin::Table head -->
                        <thead class="fw-bold">
                          <th class="w-40px">
                            <!-- <div
                                                          class="form-check form-check-sm form-check-custom form-check-solid p-0"
                                                        >
                                                          <input
                                                            class="form-check-input"
                                                            type="checkbox"
                                                            value="1"
                                                            data-kt-check="true"
                                                            data-kt-check-target=".widget-9-check"
                                                          />
                                                        </div> -->
                          </th>
            
                          <!--Reference & Status-->
                          <th class="min-w-120px" (click)="
                                                          listingData('Ref', !form.value.sortDirection, page, itemsPerPage)
                                                        ">
                            Reference
                          </th>
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Status',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Status
                          </th>
            
                          <!--BasicDetails-->
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Agent',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Assigned To
                          </th>
            
                          <!--Agent Email: hiding it for now -->
            
                          <!--./hiding-->
            
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Usage',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Usage
                          </th>
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Purpose',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Purpose
                          </th>
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Category',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Property Type
                          </th>
            
                          <th class="min-w-120px" (click)="
                                                          listingData('Beds', !form.value.sortDirection, page, itemsPerPage)
                                                        ">
                            Beds
                          </th>
            
                          <th class="min-w-120px" (click)="listingData('BUA', !form.value.sortDirection, page, itemsPerPage)">Built-up Area</th>
            
            
            
            
            
            
            
                          <!--Address-->
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Emirate',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Emirate
                          </th>
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Location',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Location
                          </th>
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'SubLocation',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Sub Location
                          </th>
            
                          <th class="min-w-120px" (click)="
                                                          listingData('Unit', !form.value.sortDirection, page, itemsPerPage)
                                                        ">
                            Unit No.
                          </th>
            
            
                          <!--Pricing-->
            
            
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'Price',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Price
                          </th>
            
            
            
            
            
                          <!--Contact Details-->
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'OwnerFirstname',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Owner First Name
                          </th>
                          <th class="min-w-120px" (click)="
                                                          listingData(
                                                            'OwnerLastname',
                                                            !form.value.sortDirection,
                                                            page,
                                                            itemsPerPage
                                                          )
                                                        ">
                            Owner Last Name
                          </th>
            
            
                        </thead>
                        <!-- end::Table head -->
            
                        <!-- begin::Table Filter -->
                        <thead id="filter">
                          <th></th>
            
                          <!--Reference & Status-->
                          <th>
                            <input placeholder="Min. 3 chars" formControlName="reference" class="form-control mb-3 mb-lg-0" (keyup)="
                                                            onFilterSelection('reference', $event, page, itemsPerPage)
                                                          " />
                          </th>
                          <th>
                            <ng-select formControlName="status" bindLabel="name" (change)="
                                                            onFilterSelectionDrp('status', $event, page, itemsPerPage)
                                                          ">
                              <ng-option *ngFor="let car of statusList" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>
            
                          <!--BasicDetails-->
                          <th>
                            <!-- <input
                                                            formControlName="agent"
                                                            class="form-control mb-3 mb-lg-0"
                                                            (keyup)="onFilterSelection('agent', $event, page, itemsPerPage
                                            )"
                                                          /> -->
                            <ng-select formControlName="assignedToId" bindLabel="name" (change)="
                                                            onFilterSelectionDrp('assignedToId', $event, page, itemsPerPage)
                                                          ">
                              <ng-option *ngFor="let car of assignToList" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>
            
                          <!--Agent Email: hiding it for now -->
            
                          <!--./hiding-->
            
                          <th>
                            <ng-select formControlName="usageId" bindLabel="name" (change)="
                                                            onFilterSelectionDrp('usageId', $event, page, itemsPerPage)
                                                          ">
                              <ng-option *ngFor="let car of usageList" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>
            
                          <th>
                            <ng-select formControlName="purposeId" bindLabel="name" (change)="
                                                            onFilterSelectionDrp('purposeId', $event, page, itemsPerPage)
                                                          ">
                              <ng-option *ngFor="let car of purposeList" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>
            
                          <th>
                            <ng-select formControlName="propertyTypeId" bindLabel="name" (change)="
                                                            onFilterSelectionDrp(
                                                              'propertyTypeId',
                                                              $event,
                                                              page,
                                                              itemsPerPage
                                                            )
                                                          ">
                              <ng-option *ngFor="let car of propertyTypeList" [value]="car.id">{{ car.name }}</ng-option>
                            </ng-select>
                          </th>
            
                          <th>
                            <ng-select formControlName="bedsId" bindLabel="name" (change)="
                                                            onFilterSelectionDrp('bedsId', $event, page, itemsPerPage)
                                                          ">
                              <ng-option *ngFor="let car of bedList" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>

                          <th>
                            <div class="d-flex gap-2 w-200px">
                              <input
                                placeholder="From"
                                formControlName="minBUA"
                                class="form-control mb-3 mb-lg-0"
                                mask="0*.00"
                                [dropSpecialCharacters]="false"
                                (keyup)="
                                onFilterSelectionDecimal('minBUA', $event, page, itemsPerPage)
                                "
                              />
                              <input
                                placeholder="To"
                                formControlName="maxBUA"
                                mask="0*.00"
                                [dropSpecialCharacters]="false"
                                class="form-control mb-3 mb-lg-0"
                                (keyup)="
                                onFilterSelectionDecimal('maxBUA', $event, page, itemsPerPage)
                                "
                              />
                            </div>
                          </th>
            
            
                          <!--Address-->
                          <th>
                            <ng-select formControlName="emiratesId" bindLabel="name" (change)="
                                                            onFilterSelectionDrp('emiratesId', $event, page, itemsPerPage)
                                                          ">
                              <ng-option *ngFor="let car of AllEmirates" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>
                          <th>
                            <ng-select formControlName="locationId" bindLabel="name" (change)="
                                                            onFilterSelectionDrp('locationId', $event, page, itemsPerPage)
                                                          ">
                              <ng-option *ngFor="let car of AllLocation" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>
                          <th>
                            <ng-select formControlName="subLocationId" (change)="
                                                            onFilterSelectionDrp(
                                                              'subLocationId',
                                                              $event,
                                                              page,
                                                              itemsPerPage
                                                            )
                                                          ">
                              <ng-option *ngFor="let car of AllSubLocation" [value]="car.id">{{
                                car.name
                                }}</ng-option>
                            </ng-select>
                          </th>
            
                          <th>
                            <input formControlName="unitNumber" class="form-control mb-3 mb-lg-0" (keyup)="
                                                          onFilterSelection1st('unitNumber', $event, page, itemsPerPage)
                                                          " />
                          </th>
            
                          <th>
                            <div class="d-flex gap-2 w-200px">
                              <input placeholder="From" formControlName="minPrice" class="form-control mb-3 mb-lg-0" (keyup)="
                                                              onFilterSelectionDecimal(
                                                                'minPrice',
                                                                $event,
                                                                page,
                                                                itemsPerPage
                                                              )
                                                            " />
                              <input placeholder="To" formControlName="maxPrice" class="form-control mb-3 mb-lg-0" (keyup)="
                                                              onFilterSelectionDecimal(
                                                                'maxPrice',
                                                                $event,
                                                                page,
                                                                itemsPerPage
                                                              )
                                                            " />
                            </div>
                          </th>
            
                          <th>
                            <input placeholder="Min. 3 chars" formControlName="ownerFirstName" type="text"
                              class="form-control mb-3 mb-lg-0" (keyup)="
                                                            onFilterSelection('ownerFirstName', $event, page, itemsPerPage)
                                                          " />
                          </th>
                          <th>
                            <input placeholder="Min. 3 chars" formControlName="ownerLastName" type="text"
                              class="form-control mb-3 mb-lg-0" style="border-bottom: 1px solid #e1e3ea;" (keyup)="
                                                            onFilterSelection('ownerLastName', $event, page, itemsPerPage)
                                                          " />
                          </th>
            
                        </thead>
                        <!-- end::Table Filter -->
                        <!-- begin::Table Body -->
                        <tbody *ngIf="listingDetailsList.length > 0">
                          <tr *ngFor="
                                                          let data of listingDetailsList
                                                            | paginate
                                                              : {
                                                                 id:'lead_listing_viewings',
                                                                  itemsPerPage: itemsPerPage,
                                                                  currentPage: page,
                                                                  totalItems: totalRecord
                                                                }
                                                        ">
                            <th class="w-40px align-middle">
                              <div class="form-check form-check-sm form-check-custom form-check-solid p-0">
                                <input class="form-check-input cursor-pointer" type="radio" name="Contact"
                                  [checked]="selectedListingId == data?.id" value="{{ data.id }}"
                                  (click)="onSelectListing(data?.listingId)" />
                              </div>
                            </th>
                            <th class="align-middle">{{ data.reference }}</th>
                            <th class="align-middle"><span
                                [ngClass]="data.statusName == 'Draft'? 'text-blue':data.statusName == 'Published'?'text-green': 'text-orange'">{{
                                data.statusName }}</span></th>
                            <th class=" align-middle">
                              <div class="d-flex gap-2">
                                <ngx-avatar *ngIf="data?.profileImage == null || data?.profileImage == ''" size="26" class="avatar" [name]="data?.agentName"></ngx-avatar>
                                <img *ngIf="data?.profileImage != null && data?.profileImage != ''" [src]="imgUrl + data?.profileImage" alt="Image Preview" [style.border-radius.px]="50" [style.width.px]="26" [style.height.px]="26">
                                <!-- <ngx-avatar size="26" class="avatar"
                                  [name]="data?.agentName"></ngx-avatar> -->
                                  {{ data.agentName }}</div>
                            </th>
                            <!--Agent Email: hiding it for now-->
                            <!--./hiding it-->
                            <th class="align-middle">
                              {{ data.usageName }}
                            </th>
                            <th class="align-middle">
                              {{ data.purposeName }}
                            </th>
                            <th class="align-middle">
                              {{ data.propertytypeName }}
                            </th>
            
                            <th class="align-middle">
                              {{ data.bedsName }}
                            </th>

                            <th class="align-middle">
                              {{ data.buildUpArea }}
                            </th>
            
                            <th class="align-middle">
                              {{ data.emiratesName }}
                            </th>
                            <th class="align-middle">
                              {{ data.locationName }}
                            </th>
                            <th class="align-middle">
                              {{ data.subLocationName }}
                            </th>
            
                            <th class="align-middle">
                              {{ data.unitNumber }}
                            </th>
            
                            <th class="align-middle">
                              {{ data.price }}
                            </th>
            
                            <th class="align-middle">
                              {{ data.ownerFirstname }}
                            </th>
                            <th class="align-middle">
                              {{ data.ownerLastname }}
                            </th>
            
                          </tr>
                        </tbody>
                        <!-- end::Table Body -->
                      </table>
                      <div class="text-center mt-5 mb-5" *ngIf="listingDetailsList && listingDetailsList?.length == 0">
                        Record not available
                      </div>
                      <!-- end::Table -->
                    </div>
                    <!-- end::Table container -->
                  </div>
                  <div class="modal-footer py-3">
                    <div class="d-flex justify-content-between flex-column-reverse me-auto">
                      <pagination-controls *ngIf="listingDetailsList.length > 0"
                        (pageChange)="renderPage($event)" id="lead_listing_viewings"></pagination-controls>
                      <span class="d-block mb-3">Showing {{ listingDetailsList.length }} of <b>{{ totalRecord }}</b> Listings</span>
                    </div>
            
                    <button (click)="ViewListingDataClose()"
                      class="btn btn-sm btn-light btn-active-light-primary me-3">Cancel</button>
                    <button (click)="ViewListingDataSave()" class="btn btn-sm btn-primary"
                      [disabled]="tempSelectedLeadRef == null">Apply</button>
            
                  </div>
                </div>
              </form>
            
            
            
            
            </ng-template>
          <div>
          <div>
            <div class="row mb-6" id="viewingSec2">
              <label class="col-lg-3 col-form-label fw-bold fs-6 required">Start Date</label>
              <div class="col-lg-3">

                <input style="    width: 191px;" type="date" id="startDate" class="form-control form-control-lg mb-3 mb-lg-0"
                  formControlName="startDate" [ngClass]="isViewingSave && startDate.invalid  ? 'border-error' : ''"
                  />
                  <div *ngIf="isViewingSave && startDate.invalid" class="required-feedback">
                    <div class="error-text">Start Date is required</div>
                  </div>
              </div>
              <div class="col-lg-3" id="viewingSec2">
                <input style="width: 175px;" type="time" id="startDateTime" class="form-control form-control-lg mb-3 mb-lg-0"
                  formControlName="startDateTime" [ngClass]="isViewingSave && startDateTime.invalid  ? 'border-error' : ''"/>
                <div *ngIf="isViewingSave && startDateTime.invalid" class="required-feedback">
                  <div class="error-text">Start Time is required</div>
                </div>
              </div>
            </div>
            <div class="row mb-6">
              <label class="col-lg-3 col-form-label fw-bold fs-6 required">End Date</label>
              <div class="col-lg-3">
                <input style="    width: 191px;" type="date" id="endDate" class="form-control form-control-lg mb-3 mb-lg-0"
                  formControlName="endDate" [ngClass]="isViewingSave && endDate.invalid  ? 'border-error' : ''"
                  />
                  <div *ngIf="isViewingSave && endDate.invalid" class="required-feedback">
                    <div class="error-text">End Date is required</div>
                  </div>
              </div>
              <div class="col-lg-3">
                <input style="width: 175px;" type="time" id="endDateTime" class="form-control form-control-lg mb-3 mb-lg-0"
                  formControlName="endDateTime" [ngClass]="isViewingSave && endDateTime.invalid  ? 'border-error' : ''" />
                <div *ngIf="isViewingSave && endDateTime.invalid" class="required-feedback">
                  <div class="error-text">End Time is required</div>
                </div>
              </div>
            </div>
            <div class="row mb-6">
              <label class="col-lg-3 col-form-label fw-bold fs-6">Notes</label>
              <div class="col-lg-6">
                <div>
                  <textarea style="width: 396px;"
                    name="Notes"
                    formControlName="notes"
                    id="Notes"
                    cols="50"
                    rows="10"
                  ></textarea>
                </div>
              </div>
            </div>

          </div>
          </div>
            <div class="row mb-6">
              <div class="col-lg-6">
                <a (click)="cancelList()" class="btn btn-sm btn-light btn-active-light-primary me-3">
                  Cancel
                </a>
                <a (click)="onViewing()" class="btn btn-sm btn-primary">
                  Save
                </a>
              </div>
            </div>
          </form>
          <div class="card card-bordered my-4 px-4 p-3" *ngFor="let viewData of viewingList" >
            <table class="ph-table-inner mw-75">
              <tr>
                <td><b>Viewing Reference No:</b></td>
                <td class="viewingsDataShow d-flex align-items-center">
                  {{viewData?.reference}}
                  <div id="test" class="position-relative ph-hover">
                    <a href="#" class="btn btn-icon btn-sm ph-hover__trigger">
                      <i class="bi bi-clock fs-3"></i>
                    </a>
                    <div class="menu menu-sub menu-sub-dropdown p-4 ph-hover__menu">
                      <small>
                        Created: {{ viewData.created   | date : "dd/MM/yyyy hh:mm:ss a "}}<br />
                        Updated: {{ viewData.updated   | date : "dd/MM/yyyy hh:mm:ss a"}}<br />
                      </small>
                    </div>
                  </div>
                  <div class="ms-auto">
                    <button class="btn btn-sm btn-primary mr-2" (click)="editViewIngData(viewData)">
                      Edit
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><b>Status:</b></td>
                <td>{{ viewData?.status }}</td>
              </tr>
              <tr>
                <td><b>Assigned To:</b></td>
                <td>{{ viewData?.agentName}}</td>
              </tr>
              <tr>
                <td><b>Listing Reference:</b></td>
                <td>{{ viewData?.listingReference }}</td>
              </tr>
              <tr>
                <td><b>Start Date:</b></td>
                <td>{{viewData?.startDate  | date : "dd/MM/yyyy"}} &nbsp; {{viewData?.startDateTime  | date : "hh:mm:ss a"}}</td>
              </tr>
              <tr>
                <td><b>End Date:</b></td>
                <td>{{viewData?.endDate  | date : "dd/MM/yyyy"}} &nbsp; {{viewData?.endDateTime  | date : "hh:mm:ss a"}}</td>
              </tr>
              <tr>
                <td><b>Notes:</b></td>
                <td>{{ viewData?.notes }}</td>
              </tr>
            </table>
          </div>
        </div><!--./isEdit-->
    </div>
    <div *ngIf="selectedTab == 'tab3'">
      <div class="accordian-body py-5" style="padding-left: 40px">
        <div class="row mb-4">
          <div class="col-lg-6" *ngIf="!isAdd">
            <form [formGroup]="LeadNotesForm">
            <textarea
              id="notes-add-for-display"
              formControlName="Notes"
              class="form-control form-control-lg mb-3"
              [ngClass]="isSaveNotes && Notes.invalid ? 'border-error' : ''"
              type="text"
              placeholder="Enter Notes"
              rows="4"
            ></textarea>

            <div *ngIf="isSaveNotes && Notes.invalid" class="required-feedback">
              <div class="error-text">
                Notes is required
              </div>
            </div>
            
            <button (click)="SaveLeadNotes()" class="btn btn-sm btn-primary">
              Submit
            </button>
          </form>
          </div>
        </div>
      </div>
      
      <div
        class="p-4"
        id="notes-add-for-display-1"
        *ngIf="!isAdd && LeadNotes.length > 0"
      >
      <div id="display-notes-length" >
        <div class="card card-bordered w-100 mb-4" *ngFor="let n of LeadNotes" >   
          <div class="card-body">    
              <div class="w-100 d-flex flex-stack mb-8">
                  <div class="d-flex align-items-center " >
                      <div class="d-flex flex-column fw-semibold fs-5 text-gray-600 text-dark">    
                          <div class="d-flex align-items-center" hidden>    
                              <a class="text-gray-800 fw-bold text-hover-primary fs-5 me-3">{{n?.createdBy}}</a>
                              <span class="m-0"></span>               
                          </div>
        
                          <span class="text-muted fw-semibold fs-6">{{ n?.createdDate  | date : "dd/MM/yyyy hh:mm:ss a " }}</span>     
                      </div>
                  </div>
              </div>
        
              <p class="fw-normal fs-5 text-gray-700 m-0">
                {{ n.notes }}
              </p> 
          </div>
        </div>
        </div>
      </div>
      
    </div>
    <div *ngIf="selectedTab == 'tab4'">
      <div *ngIf="MatchingPropertyRequirementList.length > 0" class="row matching-properties-title" >
        <div class="col-lg-12">Please select a property requirement to view the matching properties.</div>
      </div>
      <div class="card card-bordered card-propertyreq" *ngFor="let property of MatchingPropertyRequirementList; let i=index">
        <div class="row mb-6">
          <div class="col-lg-1">
            <div class="form-check form-check-sm form-check-custom form-check-solid p-0">
              <input type="radio" name="Matchingproperty" class="form-check-input cursor-pointer bd-grey"
                (change)="getMatchingProperties(i,property)">
            </div>
          
          </div>
          <div class="col-lg-6">
            <span class="fw-bold">Property Requirement {{i+1}}</span>
          </div>
        </div>
    
        <div class="row mb-6">
          <div class="col-lg-1"></div>
          <div class="col-lg-11 d-flex align-items-center">
            {{property.propertyTypeName}} for {{property.purposeName}} in {{property.emiratesName}} {{property.listingRef !=
            null ? getPropertyListing(property.listingRef) : '' }}
          </div>
        </div>
    
        <div class="row mb-6" *ngIf="property.showLocationDetails == false && (property.locationName != null || property.subLocationName != null || property.minBedsName != null || property.maxBedsName != null || property.minArea != null || property.maxArea != null || property.minPrice != null || property.maxPrice != null)">
          <div class="col-lg-1"></div>
          <div class="col-lg-6 d-flex align-items-center">
            <span class="link-hover" (click)="toggleLocationDetails(i)">Read more</span>
          </div>
        </div>

        <span *ngIf="property.showLocationDetails == true">
        <div class="row mb-6" *ngIf="property.locationName != null || property.subLocationName != null">
          <div class="col-lg-1"></div>
          <div class="col-lg-11 d-flex align-items-center">
           <span *ngIf="property.locationName != null"> Location: {{property.locationName}}</span><span *ngIf="property.locationName != null && property.subLocationName != null">, </span><span *ngIf="property.subLocationName != null">&nbsp;Sub Location: {{property.subLocationName}}</span>
          </div>
        </div>
    
        <div class="row mb-6" *ngIf="property.minBedsName != null || property.maxBedsName != null || property.minArea != null || property.maxArea != null">
          <div class="col-lg-1"></div>
          <div class="col-lg-6 d-flex align-items-center">
            <span *ngIf="property.minBedsName != null || property.maxBedsName != null">
            <span *ngIf="property.minBedsName != null && property.maxBedsName == null">Beds: Min. {{property.minBedsName}} </span>
            <span *ngIf="property.minBedsName == null && property.maxBedsName != null">Beds: Max. {{property.maxBedsName}}</span>
            <span *ngIf="property.minBedsName != null && property.maxBedsName != null">Beds: {{property.minBedsName}} - {{property.maxBedsName}}</span>
            </span>
            <span *ngIf="property.minArea != null || property.maxArea != null">
              <span *ngIf="property.minArea != null && property.maxArea == null"><span *ngIf="property.minBedsName != null || property.maxBedsName != null">, </span>BUA: Min. {{property.minArea}} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
              <span *ngIf="property.minArea == null && property.maxArea != null"><span *ngIf="property.minBedsName != null || property.maxBedsName != null">, </span>BUA: Max. {{property.maxArea}} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
              <span *ngIf="property.minArea != null && property.maxArea != null"><span *ngIf="property.minBedsName != null || property.maxBedsName != null">, </span>BUA: {{property.minArea}} - {{property.maxArea}} {{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span>
              </span>          
          </div>
        </div>
    
        <div class="row mb-6" *ngIf="property.minPrice != null || property.maxPrice != null">
          <div class="col-lg-1"></div>
          <div class="col-lg-6 d-flex align-items-center">
            <span *ngIf="property.minPrice != null || property.maxPrice != null">
              <span *ngIf="property.minPrice != null && property.maxPrice == null">Price: Min. {{this.companySettings?.currency}} {{property.minPrice}} </span>
              <span *ngIf="property.minPrice == null && property.maxPrice != null">Price: Max. {{this.companySettings?.currency}} {{property.maxPrice}}</span>
              <span *ngIf="property.minPrice != null && property.maxPrice != null">Price: {{this.companySettings?.currency}} {{property.minPrice}} - {{property.maxPrice}}</span>
              </span>
          </div>
        </div>
      </span>

      <span *ngIf="property.showMatchingProperties == true">
        <div class="row">
          <!-- <div class="col-lg-1">
          </div> -->
          <div class="matching-properties-border">
            <!-- <hr class="horizantal-ruler"> -->
          </div>
        </div>
        <div class="row mb-6">
          <div class="col-lg-1"></div>
          <div class="col-lg-11 d-flex align-items-center justify-content-between">
            <span class="fw-bold">Matching Properties</span>
            <span class="d-flex gap-3">
            <button [disabled]="property.matchingProperties.length == 0" class="btn btn-sm btn-light-primary" (click)="openViewingMatchingList()">
              <i class="bi bi-table"></i> Open in Table View
            </button>
            <button [disabled]="previewLinks.length == 0" class="btn btn-sm btn-flex btn-primary fw-bold" (click)="sendWhatsappMessage()">
              <i class="bi bi-whatsapp fs-2"></i> WhatsApp
            </button>
          </span>
          </div>
        </div>

        <span class="row matching-properties" *ngFor="let matchingProperty of property.matchingProperties">
        <div class="row" style="margin-bottom: 6px;">
          <div class="col-lg-1">
            <div class="form-check form-check-sm form-check-custom form-check-solid p-0">
              <input class="form-check-input cursor-pointer bd-grey" type="checkbox" [(ngModel)]="matchingProperty.isChecked" [ngModelOptions]="{standalone: true}" value="{{ matchingProperty.listingId }}" data-kt-check="true" data-kt-check-target=".widget-9-check" (change)="addRemovePreviewLink($event)" />
            </div>
            
          </div>
          <div class="col-lg-9">
            <div class="matching-container">
              <img *ngIf="matchingProperty.photos != null" [src]="baseUrl + matchingProperty.photos[0].imagePath" alt="Image" class="image">
              <img alt="Image" *ngIf="matchingProperty.photos == null" class="image" src="https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/8462ea22404695.563122125aca7.jpg">
              <div class="text-container">
                <div><i class="fa-sharp fa-solid fa-location-dot mr-2"></i> {{matchingProperty.locationName}}<span *ngIf="matchingProperty.locationName != null && matchingProperty.subLocationName != null">, </span><span>{{matchingProperty.subLocationName}}</span></div>
                <div><i class="fa-solid fa-bed mr-2"></i> <span class="mr-5"> {{matchingProperty.bedsQuantity}} </span>  <i class="fa-solid fa-bath mr-2"></i> {{matchingProperty.bathsQuantity}}</div>
                <div> <i class="fa-solid fa-ruler-combined mr-2"></i> {{matchingProperty.builtupArea}} <span *ngIf="matchingProperty.builtupArea != null">{{ companySettings?.measuringUnit == 'Square Feet'? 'Sq. Ft.':'Sq. M.' }}</span></div>
                <div class="fw-bold">{{companySettings?.currency}} {{matchingProperty.price}}</div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mb-6">
          <div class="col-lg-1"></div>
          <div class="col-lg-9"> {{matchingProperty.listingRef}}</div>
        </div>
        </span>
        <div class="row mb-6" *ngIf="property.matchingProperties.length == 0">
          <!-- <div class="col-lg-1"></div> -->
          <div class="col-lg-12 d-flex justify-content-start">No matching properties found for the selected property requirement. Consider broadening your criteria to view matching properties.</div>
        </div>
      </span>
    
      </div>
      <div class="matching-properties-title" *ngIf="!isAdd && (MatchingPropertyRequirementList == null || MatchingPropertyRequirementList.length == 0)">
        <span>You haven't added any property requirement for this lead yet. To view matching properties, please add the lead's property requirement(s).
        </span>
      </div>
    </div>
    </div>
  </form>
  </form>
  </div>
</div>

<ng-template #ViewMatchingListing>
  <form [formGroup]="MatchingListingsform" novalidate="" class="form">
      <div class="modal-content advance-filter-modal">
        <div class="modal-header py-3">
          <!--begin::Modal title-->
          <h4 class="m-0">Matching Properties</h4>
          <!--end::Modal title-->
          <div
            class="btn btn-sm btn-icon btn-active-color-primary"
            (click)="closeViewMatchingListings()"
          >
            <i class="ki-duotone ki-cross fs-1"
              ><span class="path1"></span><span class="path2"></span
            ></i>
          </div>
        </div>
        <div class="modal-body p-0">
          <div class="table-responsive">
            <!-- begin::Table -->
            <table
            id="listings_row"
            class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"
          >
            <!-- begin::Table head -->
            <thead class="fw-bold">
              <th class="w-40px">
                <!-- <div
                  class="form-check form-check-sm form-check-custom form-check-solid p-0"
                >
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value="1"
                    data-kt-check="true"
                    data-kt-check-target=".widget-9-check"
                  />
                </div> -->
              </th>

              <!--Reference & Status-->
              <th
                class="min-w-120px"
                (click)="
                  listingMatchingData('Ref', !MatchingListingsform.value.sortDirection, pageMatchingListing, itemsPerPageMatchingListing)
                "
              >
                Reference
              </th>
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Status',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Status
              </th>
              
              <!--BasicDetails-->
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Agent',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Assigned To
              </th>

              <!--Agent Email: hiding it for now -->
              
              <!--./hiding-->

              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Usage',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Usage
              </th>
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Purpose',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Purpose
              </th>
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Category',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Property Type
              </th>
              
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData('Beds', !MatchingListingsform.value.sortDirection, pageMatchingListing, itemsPerPageMatchingListing)
                "
              >
                Beds
              </th>

              <th class="min-w-120px" (click)="listingMatchingData('BUA', !MatchingListingsform.value.sortDirection, pageMatchingListing, itemsPerPageMatchingListing)">Built-up Area</th>
              
            
              
            
            
              
            
              <!--Address-->
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Emirate',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Emirate
              </th>
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Location',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Location
              </th>
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'SubLocation',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Sub Location
              </th>
              
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData('Unit', !MatchingListingsform.value.sortDirection, pageMatchingListing, itemsPerPageMatchingListing)
                "
              >
                Unit No.
              </th>
              

              <!--Pricing-->
            

              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'Price',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Price
              </th>
              

              
              
              
              <!--Contact Details-->
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'OwnerFirstname',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Owner First Name
              </th>
              <th
                class="min-w-120px"
                (click)="
                listingMatchingData(
                    'OwnerLastname',
                    !MatchingListingsform.value.sortDirection,
                    pageMatchingListing,
                    itemsPerPageMatchingListing
                  )
                "
              >
                Owner Last Name
              </th>
              
            
            </thead>
            <!-- end::Table head -->

            <!-- begin::Table Filter -->
            <thead id="filter">
              <th></th>

              <!--Reference & Status-->
              <th>
                <input
                  placeholder="Min. 3 chars"
                  formControlName="reference"
                  class="form-control mb-3 mb-lg-0"
                  (keyup)="
                    onFilterMatchingListingSelection('reference', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                />
              </th>
              <th>
                <ng-select
                  formControlName="status"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp('status', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                >
                  <ng-option *ngFor="let car of statusList" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>
            
              <!--BasicDetails-->
              <th>
                <!-- <input
                    formControlName="agent"
                    class="form-control mb-3 mb-lg-0"
                    (keyup)="onFilterSelection('agent', $event, page, itemsPerPage
    )"
                  /> -->
                <ng-select
                  formControlName="assignedToId"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp('assignedToId', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                >
                  <ng-option *ngFor="let car of assignToList" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>

              <!--Agent Email: hiding it for now -->
            
              <!--./hiding-->

              <th>
                <ng-select
                  formControlName="usageId"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp('usageId', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                >
                  <ng-option *ngFor="let car of usageList" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>

              <th>
                <ng-select
                  formControlName="purposeId"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp('purposeId', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                >
                  <ng-option *ngFor="let car of purposeList" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>

              <th>
                <ng-select
                  formControlName="propertyTypeId"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp(
                      'propertyTypeId',
                      $event,
                      pageMatchingListing,
                      itemsPerPageMatchingListing
                    )
                  "
                >
                  <ng-option
                    *ngFor="let car of propertyTypeList"
                    [value]="car.id"
                    >{{ car.name }}</ng-option
                  >
                </ng-select>
              </th>
              
              <th>
                <ng-select
                  formControlName="bedsId"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp('bedsId', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                >
                  <ng-option *ngFor="let car of bedList" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>

              <th>
                <div class="d-flex gap-2 w-200px">
                  <input
                    placeholder="From"
                    formControlName="minBUA"
                    class="form-control mb-3 mb-lg-0"
                    mask="0*.00"
                    [dropSpecialCharacters]="false"
                    (keyup)="
                    onFilterMatchingListingSelectionDecimal('minBUA', $event, pageMatchingListing, itemsPerPageMatchingListing)
                    "
                  />
                  <input
                    placeholder="To"
                    formControlName="maxBUA"
                    mask="0*.00"
                    [dropSpecialCharacters]="false"
                    class="form-control mb-3 mb-lg-0"
                    (keyup)="
                    onFilterMatchingListingSelectionDecimal('maxBUA', $event, pageMatchingListing, itemsPerPageMatchingListing)
                    "
                  />
                </div>
              </th>
              
              
              <!--Address-->
              <th>
                <ng-select
                  formControlName="emiratesId"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp('emiratesId', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                >
                  <ng-option *ngFor="let car of AllEmirates" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>
              <th>
                <ng-select
                  formControlName="locationId"
                  bindLabel="name"
                  (change)="
                    onFilterMatchingListingSelectionDrp('locationId', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                >
                  <ng-option *ngFor="let car of AllLocation" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>
              <th>
                <ng-select
                  formControlName="subLocationId"
                  (change)="
                    onFilterMatchingListingSelectionDrp(
                      'subLocationId',
                      $event,
                      pageMatchingListing,
                      itemsPerPageMatchingListing
                    )
                  "
                >
                  <ng-option *ngFor="let car of AllSubLocation" [value]="car.id">{{
                    car.name
                  }}</ng-option>
                </ng-select>
              </th>
              
              <th>
                <input
                  formControlName="unitNumber"
                  class="form-control mb-3 mb-lg-0"
                  (keyup)="
                  onFilterMatchingListingSelection1st('unitNumber', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                />
              </th>
            
              <th>
                <div class="d-flex gap-2 w-200px">
                  <input
                    placeholder="From"
                    formControlName="minPrice"
                    class="form-control mb-3 mb-lg-0"
                    (keyup)="
                      onFilterMatchingListingSelectionDecimal(
                        'minPrice',
                        $event,
                        pageMatchingListing,
                        itemsPerPageMatchingListing
                      )
                    "
                  />
                  <input
                    placeholder="To"
                    formControlName="maxPrice"
                    class="form-control mb-3 mb-lg-0"
                    (keyup)="
                      onFilterMatchingListingSelectionDecimal(
                        'maxPrice',
                        $event,
                        pageMatchingListing,
                        itemsPerPageMatchingListing
                      )
                    "
                  />
                </div>
              </th>
              
              <th>
                <input
                  placeholder="Min. 3 chars"
                  formControlName="ownerFirstName"
                  type="text"
                  class="form-control mb-3 mb-lg-0"
                  (keyup)="
                    onFilterMatchingListingSelection('ownerFirstName', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                />
              </th>
              <th>
                <input
                  placeholder="Min. 3 chars"
                  formControlName="ownerLastName"
                  type="text"
                  class="form-control mb-3 mb-lg-0"
                  (keyup)="
                    onFilterMatchingListingSelection('ownerLastName', $event, pageMatchingListing, itemsPerPageMatchingListing)
                  "
                />
              </th>
              
            </thead>
            <!-- end::Table Filter -->
            <!-- begin::Table Body -->
            <tbody *ngIf="MatchinglistingDetails.length > 0">
              <tr
                *ngFor="
                  let data of MatchinglistingDetails
                    | paginate
                      : {
                          id:'matching_listingDetails',
                          itemsPerPage: itemsPerPageMatchingListing,
                          currentPage: pageMatchingListing,
                          totalItems: totalMatchingListingRecord
                        }
                " 
              >
                <th class="w-40px align-middle">
                  <div
                    class="form-check form-check-sm form-check-custom form-check-solid p-0"
                  >
                  <input class="form-check-input cursor-pointer" type="checkbox" name="Contact"  value="{{ data.id }}" [(ngModel)]="data.isSelected" [ngModelOptions]="{standalone: true}" (change)="addRemovePreviewLinkTableView($event)"
                   />
                  </div>
                </th>
                <th class="kt_activities_toggle align-middle" >{{ data.reference }}</th>
                <th class="kt_activities_toggle align-middle" ><span [ngClass]="data.statusName == 'Draft'? 'text-blue':data.statusName == 'Published'?'text-green': 'text-orange'">{{ data.statusName }}</span></th>
                <th class="kt_activities_toggle align-middle" ><div class="d-flex gap-2 align-items-center">
                  <ngx-avatar *ngIf="data?.profileImage == null || data?.profileImage == ''" size="26" class="avatar" [name]="data?.agentName"></ngx-avatar>
                <img *ngIf="data?.profileImage != null && data?.profileImage != ''" [src]="imgUrl + data?.profileImage" alt="Image Preview" [style.border-radius.px]="50" [style.width.px]="26" [style.height.px]="26">
                  <!-- <ngx-avatar size="26" class="avatar" [name]="data?.agentName"></ngx-avatar> -->
                  {{ data.agentName }}</div></th>
                <!--Agent Email: hiding it for now-->
                <!--./hiding it-->
                <th class="kt_activities_toggle align-middle" >
                  {{ data.usageName }}
                </th>
                <th class="kt_activities_toggle align-middle" >
                  {{ data.purposeName }}
                </th>
                <th class="kt_activities_toggle align-middle" >
                  {{ data.propertytypeName }}
                </th>
                
                <th class="kt_activities_toggle align-middle" >
                  {{ data.bedsName }}
                </th>

                <th class="kt_activities_toggle align-middle" >
                  {{ data.buildUpArea }}
                </th>
                
                <th class="kt_activities_toggle align-middle" >
                  {{ data.emiratesName }}
                </th>
                <th class="kt_activities_toggle align-middle" >
                  {{ data.locationName }}
                </th>
                <th class="kt_activities_toggle align-middle" >
                  {{ data.subLocationName }}
                </th>
                
                <th class="kt_activities_toggle align-middle" >
                  {{ data.unitNumber }}
                </th>
                
                <th class="kt_activities_toggle align-middle" >
                  {{ data.price }}
                </th>
                
                <th class="kt_activities_toggle align-middle" >
                  {{ data.ownerFirstname }}
                </th>
                <th class="kt_activities_toggle align-middle" >
                  {{ data.ownerLastname }}
                </th>
                
              </tr>
            </tbody>
            <!-- end::Table Body -->
          </table>
            <div
              class="text-center mt-5 mb-5"
              *ngIf="MatchinglistingDetails && MatchinglistingDetails?.length == 0"
            >
              Record not available
            </div>
            <!-- end::Table -->
          </div>
          <!-- end::Table container -->
        </div>
        <div class="modal-footer py-3">
          <div class="d-flex justify-content-between flex-column-reverse me-auto">
            <pagination-controls *ngIf="MatchinglistingDetails.length > 0" (pageChange)="renderMatchingListingPage($event)" id="matching_listingDetails"></pagination-controls>
            <span class="d-block mb-3">Showing {{ MatchinglistingDetails.length }} of <b>{{ totalMatchingListingRecord }}</b> Listings</span>
          </div>

          <button class="btn btn-sm btn-light btn-active-light-primary me-3" (click)="closeViewMatchingListings()"> Cancel </button>
          <button
          [disabled]="previewLinksTableView.length == 0"
          (click)="sendWhatsappMessageTableView()"
          class="btn btn-sm btn-flex btn-primary fw-bold me-1"
          id=""
        >
          <i class="bi bi-whatsapp"></i> WhatsApp
          </button>
        </div>
      </div>
  </form>
</ng-template>





